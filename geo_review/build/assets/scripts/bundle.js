!function(I){function g(C){if(c[C])return c[C].exports;var n=c[C]={i:C,l:!1,exports:{}};return I[C].call(n.exports,n,n.exports,g),n.l=!0,n.exports}var c={};g.m=I,g.c=c,g.d=function(I,c,C){g.o(I,c)||Object.defineProperty(I,c,{configurable:!1,enumerable:!0,get:C})},g.n=function(I){var c=I&&I.__esModule?function(){return I.default}:function(){return I};return g.d(c,"a",c),c},g.o=function(I,g){return Object.prototype.hasOwnProperty.call(I,g)},g.p="",g(g.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\n\nvar _controller = __webpack_require__(1);\n\nvar _controller2 = _interopRequireDefault(_controller);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar controller = new _controller2.default();\n\n/*function setMarkers(myMap, myMarkers){\t\t\r\n    \r\n    \r\n    for (var i = 0; i < myMarkers.length; i++) {\r\n      var burger = myMarkers[i];\r\n      \r\n      var myPlacemark = new ymaps.Placemark([burger[1], burger[2]], {}, {\r\n      iconLayout: 'default#image',\r\n      iconImageHref: './img/content/map-marker.svg',\r\n      iconImageSize: [46, 57],\r\n      iconImageOffset: [-3, -42]\r\n      });\r\n      myMap.geoObjects.add(myPlacemark);\r\n    }\r\n  }\r\n\r\n\r\nymaps.ready(init);\r\n  var myMap;\r\n\r\n  function init(){     \r\n      myMap = new ymaps.Map(\"map\", {\r\n          center: [59.945, 30.264],\r\n          zoom: 11,\r\n          controls: [\"zoomControl\", \"fullscreenControl\"]\r\n      });\r\n      \r\n  myMap.behaviors.disable('scrollZoom');\r\n  \r\n  var burgerMarkers = [\r\n      ['Petrogradka', 59.977, 30.319, 1],\r\n      ['Smolnaya_nab', 59.951, 30.386, 2],\r\n      ['Kudrovo', 59.917, 30.491, 3],\r\n      ['Moskovskie_vorota', 59.893, 30.314, 4],\r\n      ];\r\n      \r\n      \r\n  //setMarkers(myMap, burgerMarkers);\r\n  }*/\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbmRleC5qcz8zOWZlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQXVCOzs7Ozs7QUFFdkIsSUFBTSxhQUFpQjs7QUFFdkIiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb250cm9sbGVyIGZyb20gJy4vTVZDL2NvbnRyb2xsZXInO1xyXG5cclxuY29uc3QgY29udHJvbGxlciA9IG5ldyBDb250cm9sbGVyKCk7XHJcblxyXG4vKmZ1bmN0aW9uIHNldE1hcmtlcnMobXlNYXAsIG15TWFya2Vycyl7XHRcdFxyXG4gICAgXHJcbiAgICBcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXlNYXJrZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciBidXJnZXIgPSBteU1hcmtlcnNbaV07XHJcbiAgICAgIFxyXG4gICAgICB2YXIgbXlQbGFjZW1hcmsgPSBuZXcgeW1hcHMuUGxhY2VtYXJrKFtidXJnZXJbMV0sIGJ1cmdlclsyXV0sIHt9LCB7XHJcbiAgICAgIGljb25MYXlvdXQ6ICdkZWZhdWx0I2ltYWdlJyxcclxuICAgICAgaWNvbkltYWdlSHJlZjogJy4vaW1nL2NvbnRlbnQvbWFwLW1hcmtlci5zdmcnLFxyXG4gICAgICBpY29uSW1hZ2VTaXplOiBbNDYsIDU3XSxcclxuICAgICAgaWNvbkltYWdlT2Zmc2V0OiBbLTMsIC00Ml1cclxuICAgICAgfSk7XHJcbiAgICAgIG15TWFwLmdlb09iamVjdHMuYWRkKG15UGxhY2VtYXJrKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxueW1hcHMucmVhZHkoaW5pdCk7XHJcbiAgdmFyIG15TWFwO1xyXG5cclxuICBmdW5jdGlvbiBpbml0KCl7ICAgICBcclxuICAgICAgbXlNYXAgPSBuZXcgeW1hcHMuTWFwKFwibWFwXCIsIHtcclxuICAgICAgICAgIGNlbnRlcjogWzU5Ljk0NSwgMzAuMjY0XSxcclxuICAgICAgICAgIHpvb206IDExLFxyXG4gICAgICAgICAgY29udHJvbHM6IFtcInpvb21Db250cm9sXCIsIFwiZnVsbHNjcmVlbkNvbnRyb2xcIl1cclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gIG15TWFwLmJlaGF2aW9ycy5kaXNhYmxlKCdzY3JvbGxab29tJyk7XHJcbiAgXHJcbiAgdmFyIGJ1cmdlck1hcmtlcnMgPSBbXHJcbiAgICAgIFsnUGV0cm9ncmFka2EnLCA1OS45NzcsIDMwLjMxOSwgMV0sXHJcbiAgICAgIFsnU21vbG5heWFfbmFiJywgNTkuOTUxLCAzMC4zODYsIDJdLFxyXG4gICAgICBbJ0t1ZHJvdm8nLCA1OS45MTcsIDMwLjQ5MSwgM10sXHJcbiAgICAgIFsnTW9za292c2tpZV92b3JvdGEnLCA1OS44OTMsIDMwLjMxNCwgNF0sXHJcbiAgICAgIF07XHJcbiAgICAgIFxyXG4gICAgICBcclxuICAvL3NldE1hcmtlcnMobXlNYXAsIGJ1cmdlck1hcmtlcnMpO1xyXG4gIH0qL1xyXG4gIFxyXG4gIFxyXG4gICAgICBcclxuICBcclxuICAgICAgXHJcbiAgICAgIFxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc2NyaXB0cy9pbmRleC5qcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Map = __webpack_require__(2);\n\nvar _class = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n\n        this.myApiMap = new Map();\n\n        this.modal = document.querySelector('#myModal');\n        this.template = document.querySelector('#balloon_template').textContent;\n\n        this.position = null;\n\n        localStorage.clear();\n\n        this.init();\n    }\n\n    _createClass(_class, [{\n        key: 'init',\n        value: async function init() {\n            var _this = this;\n\n            this.yandexApi = await this.myApiMap.initMap({\n                center: [59.945, 30.264],\n                zoom: 15,\n                controls: [\"zoomControl\", \"fullscreenControl\"]\n            });\n\n            this.yandexApi.events.add('click', async function (e) {\n                _this.position = await _this.myApiMap.getMapPosition(e);\n                //console.log(this.position);               \n                _this.openPopUp();\n            });\n\n            this.modal.addEventListener('click', function (e) {\n                if (e.target.classList.contains('close')) {\n                    _this.modal.style.display = 'none';\n                }\n                if (e.target.classList.contains('btn')) {\n                    var balloonInfo = _this.saveForm(_this.position.address);\n                    _this.modal.innerHTML = _this.popUpRender();\n\n                    var placemarks = _this.myApiMap.createPlacemark(_this.position, balloonInfo);\n                    var balloon = placemarks[0];\n                    var cluster = placemarks[1];\n                    balloon.events.add('click', function (e) {\n                        _this.position.address = balloon.properties.get('hintContent');\n                        _this.openPopUp();\n                    });\n                    cluster.events.add('balloonopen', function (event) {\n                        document.addEventListener('click', function (e) {\n                            if (e.target.classList.contains('link')) {\n                                e.preventDefault();\n                                _this.position.address = e.target.innerHTML;\n                                cluster.balloon.close();\n                                _this.openPopUp();\n                            }\n                        });\n                    });\n                }\n            });\n        }\n    }, {\n        key: 'saveForm',\n        value: function saveForm(pos) {\n            var name = document.querySelector('#input_name');\n            var place = document.querySelector('#input_place');\n            var review = document.querySelector('#input_review');\n            this.saveReview(pos, [name.value, place.value, review.value]);\n            return [pos, place.value, review.value];\n        }\n    }, {\n        key: 'openPopUp',\n        value: function openPopUp() {\n            this.modal.innerHTML = this.popUpRender();\n            this.modal.style.display = 'block';\n        }\n    }, {\n        key: 'popUpRender',\n        value: function popUpRender() {\n            var render = Handlebars.compile(this.template);\n            var reviewList = this.checkStorage(JSON.stringify(this.position.address));\n            var placeholder = null;\n            if (reviewList.length === 0) {\n                placeholder = 'Still no reviews..';\n            }\n            var renderObj = {\n                address: this.position.address,\n                reviews: reviewList,\n                default: placeholder\n            };\n            //console.log(renderObj)\n            var html = render(renderObj);\n            return html;\n        }\n    }, {\n        key: 'checkStorage',\n        value: function checkStorage(address) {\n            var reviewObj = JSON.parse(localStorage[address] || \"[]\");\n            return reviewObj;\n        }\n    }, {\n        key: 'saveReview',\n        value: function saveReview(address, review) {\n            var reviewObj = {\n                name: review[0],\n                location: review[1],\n                text: review[2]\n            };\n            var addressToStr = JSON.stringify(address);\n            var reviewList = this.checkStorage(addressToStr);\n            reviewList.push(reviewObj);\n            localStorage[addressToStr] = JSON.stringify(reviewList);\n        }\n    }]);\n\n    return _class;\n}();\n\nexports.default = _class;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9NVkMvY29udHJvbGxlci5qcz82OTg3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxJQUFNLE1BQU0sb0JBRVI7Ozs7QUFDSTs7YUFBSyxXQUFXLElBRWhCOzthQUFLLFFBQVEsU0FBUyxjQUN0QjthQUFLLFdBQVcsU0FBUyxjQUFjLHFCQUV2Qzs7YUFBSyxXQUVMOztxQkFFQTs7YUFFSDtBQUVLOzs7OztBQUVGOztpQkFBSyxZQUFZLFdBQVcsU0FBUzt3QkFDekIsQ0FBQyxRQUNUO3NCQUNBOzBCQUFVLENBQUMsZUFHZjtBQUxJLGFBRG1COztpQkFNbEIsVUFBVSxPQUFPLElBQUksU0FBUyxnQkFBTyxHQUN0QztzQkFBSyxXQUFXLE1BQU0sTUFBSyxTQUFTLGVBQ3BDO0FBQ0E7c0JBRUg7QUFFRDs7aUJBQUssTUFBTSxpQkFBaUIsU0FBVSxhQUNsQztvQkFBRyxFQUFFLE9BQU8sVUFBVSxTQUFTLFVBQzNCOzBCQUFLLE1BQU0sTUFBTSxVQUNwQjtBQUNEO29CQUFHLEVBQUUsT0FBTyxVQUFVLFNBQVMsUUFDM0I7d0JBQUksY0FBYyxNQUFLLFNBQVMsTUFBSyxTQUNyQzswQkFBSyxNQUFNLFlBQVksTUFFdkI7O3dCQUFJLGFBQWEsTUFBSyxTQUFTLGdCQUFnQixNQUFLLFVBQ3BEO3dCQUFJLFVBQVUsV0FDZDt3QkFBSSxVQUFVLFdBQ2Q7NEJBQVEsT0FBTyxJQUFJLFNBQVUsYUFDekI7OEJBQUssU0FBUyxVQUFVLFFBQVEsV0FBVyxJQUMzQzs4QkFDSDtBQUNEOzRCQUFRLE9BQU8sSUFBSSxlQUFnQixpQkFDL0I7aUNBQVMsaUJBQWlCLFNBQVUsYUFDaEM7Z0NBQUcsRUFBRSxPQUFPLFVBQVUsU0FBUyxTQUMzQjtrQ0FDQTtzQ0FBSyxTQUFTLFVBQVUsRUFBRSxPQUMxQjt3Q0FBUSxRQUNSO3NDQUNIO0FBQ0o7QUFDSjtBQUNKO0FBQ0o7QUFDSjtBQUVEOzs7aUNBQVMsS0FDTDtnQkFBSSxPQUFPLFNBQVMsY0FDcEI7Z0JBQUksUUFBUSxTQUFTLGNBQ3JCO2dCQUFJLFNBQVMsU0FBUyxjQUN0QjtpQkFBSyxXQUFXLEtBQUssQ0FBQyxLQUFLLE9BQU8sTUFBTSxPQUFPLE9BQy9DO21CQUFPLENBQUMsS0FBSyxNQUFNLE9BQU8sT0FDN0I7QUFFRDs7O29DQUNJO2lCQUFLLE1BQU0sWUFBWSxLQUN2QjtpQkFBSyxNQUFNLE1BQU0sVUFDcEI7QUFFRDs7O3NDQUNJO2dCQUFJLFNBQVMsV0FBVyxRQUFRLEtBQ2hDO2dCQUFJLGFBQWEsS0FBSyxhQUFhLEtBQUssVUFBVSxLQUFLLFNBQ3ZEO2dCQUFJLGNBQ0o7Z0JBQUksV0FBVyxXQUFXLEdBQ3RCOzhCQUNIO0FBQ0Q7Z0JBQUk7eUJBQ1MsS0FBSyxTQUNkO3lCQUNBO3lCQUVKO0FBSkk7QUFLSjtnQkFBSSxPQUFPLE9BQ1g7bUJBQ0g7QUFFRDs7O3FDQUFhLFNBQ1Q7Z0JBQUksWUFBWSxLQUFLLE1BQU0sYUFBYSxZQUN4QzttQkFDSDtBQUVEOzs7bUNBQVcsU0FBUyxRQUNoQjtnQkFBSTtzQkFFTSxPQUNOOzBCQUFVLE9BQ1Y7c0JBQU0sT0FFVjtBQUpJO2dCQUlBLGVBQWUsS0FBSyxVQUN4QjtnQkFBSSxhQUFhLEtBQUssYUFDdEI7dUJBQVcsS0FDWDt5QkFBYSxnQkFBZ0IsS0FBSyxVQUNyQztBQXpHZSIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgTWFwID0gcmVxdWlyZSgnLi4vbW9kdWxlcy9hcGkueWFuZGV4Lm1hcCcpO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzc3tcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy5teUFwaU1hcCA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICAgICAgdGhpcy5tb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNteU1vZGFsJyk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNiYWxsb29uX3RlbXBsYXRlJykudGV4dENvbnRlbnQ7XHJcblxyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBudWxsO1xyXG5cclxuICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICBcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBpbml0KCl7XHJcblxyXG4gICAgICAgIHRoaXMueWFuZGV4QXBpID0gYXdhaXQgdGhpcy5teUFwaU1hcC5pbml0TWFwKHtcclxuICAgICAgICAgICAgY2VudGVyOiBbNTkuOTQ1LCAzMC4yNjRdLFxyXG4gICAgICAgICAgICB6b29tOiAxNSxcclxuICAgICAgICAgICAgY29udHJvbHM6IFtcInpvb21Db250cm9sXCIsIFwiZnVsbHNjcmVlbkNvbnRyb2xcIl1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICB0aGlzLnlhbmRleEFwaS5ldmVudHMuYWRkKCdjbGljaycsIGFzeW5jIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBhd2FpdCB0aGlzLm15QXBpTWFwLmdldE1hcFBvc2l0aW9uKGUpOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMucG9zaXRpb24pOyAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLm9wZW5Qb3BVcCgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9KSAgICAgICAgXHJcblxyXG4gICAgICAgIHRoaXMubW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZihlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Nsb3NlJykpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYnRuJykpe1xyXG4gICAgICAgICAgICAgICAgbGV0IGJhbGxvb25JbmZvID0gdGhpcy5zYXZlRm9ybSh0aGlzLnBvc2l0aW9uLmFkZHJlc3MpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RhbC5pbm5lckhUTUwgPSB0aGlzLnBvcFVwUmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGxldCBwbGFjZW1hcmtzID0gdGhpcy5teUFwaU1hcC5jcmVhdGVQbGFjZW1hcmsodGhpcy5wb3NpdGlvbiwgYmFsbG9vbkluZm8sKTtcclxuICAgICAgICAgICAgICAgIGxldCBiYWxsb29uID0gcGxhY2VtYXJrc1swXTtcclxuICAgICAgICAgICAgICAgIGxldCBjbHVzdGVyID0gcGxhY2VtYXJrc1sxXVxyXG4gICAgICAgICAgICAgICAgYmFsbG9vbi5ldmVudHMuYWRkKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi5hZGRyZXNzID0gYmFsbG9vbi5wcm9wZXJ0aWVzLmdldCgnaGludENvbnRlbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5Qb3BVcCgpO1xyXG4gICAgICAgICAgICAgICAgfSkgIFxyXG4gICAgICAgICAgICAgICAgY2x1c3Rlci5ldmVudHMuYWRkKCdiYWxsb29ub3BlbicsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdsaW5rJykpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi5hZGRyZXNzID0gZS50YXJnZXQuaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2x1c3Rlci5iYWxsb29uLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5Qb3BVcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfSkgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSkgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHNhdmVGb3JtKHBvcyl7XHJcbiAgICAgICAgbGV0IG5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW5wdXRfbmFtZScpO1xyXG4gICAgICAgIGxldCBwbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbnB1dF9wbGFjZScpO1xyXG4gICAgICAgIGxldCByZXZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW5wdXRfcmV2aWV3Jyk7XHJcbiAgICAgICAgdGhpcy5zYXZlUmV2aWV3KHBvcywgW25hbWUudmFsdWUsIHBsYWNlLnZhbHVlLCByZXZpZXcudmFsdWVdKTtcclxuICAgICAgICByZXR1cm4gW3BvcywgcGxhY2UudmFsdWUsIHJldmlldy52YWx1ZV1cclxuICAgIH1cclxuXHJcbiAgICBvcGVuUG9wVXAoKXsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgdGhpcy5tb2RhbC5pbm5lckhUTUwgPSB0aGlzLnBvcFVwUmVuZGVyKCk7ICAgIFxyXG4gICAgICAgIHRoaXMubW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICB9XHJcblxyXG4gICAgcG9wVXBSZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IHJlbmRlciA9IEhhbmRsZWJhcnMuY29tcGlsZSh0aGlzLnRlbXBsYXRlKTtcclxuICAgICAgICBsZXQgcmV2aWV3TGlzdCA9IHRoaXMuY2hlY2tTdG9yYWdlKEpTT04uc3RyaW5naWZ5KHRoaXMucG9zaXRpb24uYWRkcmVzcykpO1xyXG4gICAgICAgIGxldCBwbGFjZWhvbGRlciA9IG51bGw7XHJcbiAgICAgICAgaWYgKHJldmlld0xpc3QubGVuZ3RoID09PSAwKXtcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXIgPSAnU3RpbGwgbm8gcmV2aWV3cy4uJ1xyXG4gICAgICAgIH0gICAgICAgIFxyXG4gICAgICAgIGxldCByZW5kZXJPYmogPSB7XHJcbiAgICAgICAgICAgIGFkZHJlc3M6IHRoaXMucG9zaXRpb24uYWRkcmVzcyxcclxuICAgICAgICAgICAgcmV2aWV3czogcmV2aWV3TGlzdCxcclxuICAgICAgICAgICAgZGVmYXVsdDogcGxhY2Vob2xkZXIgXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKHJlbmRlck9iailcclxuICAgICAgICBsZXQgaHRtbCA9IHJlbmRlcihyZW5kZXJPYmopO1xyXG4gICAgICAgIHJldHVybiBodG1sXHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tTdG9yYWdlKGFkZHJlc3Mpe1xyXG4gICAgICAgIGxldCByZXZpZXdPYmogPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZVthZGRyZXNzXSB8fCBcIltdXCIpO1xyXG4gICAgICAgIHJldHVybiByZXZpZXdPYmpcclxuICAgIH1cclxuXHJcbiAgICBzYXZlUmV2aWV3KGFkZHJlc3MsIHJldmlldyl7XHJcbiAgICAgICAgbGV0IHJldmlld09iaiA9IFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogcmV2aWV3WzBdLFxyXG4gICAgICAgICAgICBsb2NhdGlvbjogcmV2aWV3WzFdLFxyXG4gICAgICAgICAgICB0ZXh0OiByZXZpZXdbMl1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGxldCBhZGRyZXNzVG9TdHIgPSBKU09OLnN0cmluZ2lmeShhZGRyZXNzKVxyXG4gICAgICAgIGxldCByZXZpZXdMaXN0ID0gdGhpcy5jaGVja1N0b3JhZ2UoYWRkcmVzc1RvU3RyKTtcclxuICAgICAgICByZXZpZXdMaXN0LnB1c2gocmV2aWV3T2JqKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2VbYWRkcmVzc1RvU3RyXSA9IEpTT04uc3RyaW5naWZ5KHJldmlld0xpc3QpXHJcbiAgICB9ICAgICAgICBcclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zY3JpcHRzL01WQy9jb250cm9sbGVyLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nmodule.exports = function () {\n    function _class() {\n        _classCallCheck(this, _class);\n    }\n\n    _createClass(_class, [{\n        key: 'initMap',\n        value: function initMap(settings) {\n            var _this = this;\n\n            return new Promise(function (resolve, reject) {\n                return ymaps.ready(resolve);\n            }).then(function () {\n                _this.map = new ymaps.Map(\"map\", settings);\n\n                _this.cluster = new ymaps.Clusterer(_defineProperty({\n                    clusterDisableClickZoom: true,\n                    clusterOpenBalloonOnClick: true,\n                    clusterBalloonContentLayout: 'cluster#balloonCarousel',\n                    clusterBalloonPanelMaxMapArea: 0,\n                    clusterBalloonContentLayoutWidth: 200,\n                    clusterBalloonContentLayoutHeight: 250,\n                    clusterBalloonPagerSize: 5,\n                    clusterBalloonPagerVisible: false\n                }, 'clusterOpenBalloonOnClick', true));\n\n                _this.map.geoObjects.add(_this.cluster);\n\n                return _this.map;\n            });\n        }\n    }, {\n        key: 'getMapPosition',\n        value: async function getMapPosition(e) {\n            var coords = e.get('coords');\n            var geocode = await ymaps.geocode(coords);\n            var address = geocode.geoObjects.get(0).properties.get('text');\n\n            return {\n                coords: coords,\n                address: address\n            };\n        }\n    }, {\n        key: 'createPlacemark',\n        value: function createPlacemark(pos, html) {\n            var myPlacemark = new ymaps.Placemark(pos.coords, {\n                hintContent: pos.address,\n                balloonContent: ['<div>', '<strong>' + html[1] + '</strong>', '<br/>', '<a class=\\'link\\' href=\\'#\\'>' + html[0] + '</a>', '<br/>', '<strong>' + html[2] + '</strong>', '</div>'].join('')\n            }, {\n                //hideIconOnBalloonOpen: false\n                openBalloonOnClick: false\n            });\n\n            this.cluster.add(myPlacemark);\n\n            return [myPlacemark, this.cluster];\n        }\n    }]);\n\n    return _class;\n}();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9tb2R1bGVzL2FwaS55YW5kZXgubWFwLmpzPzc3MjMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxPQUNJOztBQUFlO0FBRWY7Ozs7Z0NBQVE7QUFDSjs7dUJBQVcsa0JBQVMsU0FBUztBQUFWLHVCQUFxQixNQUFNLE1BQU07YUFBN0MsRUFDTixLQUFLLFlBQ0Y7c0JBQUssTUFBTSxJQUFJLE1BQU0sSUFBSSxPQUV6Qjs7c0JBQUssY0FBYyxNQUNmOzZDQUNBOytDQUNBO2lEQUNBO21EQUNBO3NEQUNBO3VEQUNBOzZDQUNBO2dEQUNBO0FBVFcsZ0RBWWY7O3NCQUFLLElBQUksV0FBVyxJQUFJLE1BRXhCOzt1QkFBTyxNQUNWO0FBQ0o7QUFFSzs7OzZDQUFlLEdBQ2pCO2dCQUFNLFNBQVMsRUFBRSxJQUNqQjtnQkFBTSxVQUFVLE1BQU0sTUFBTSxRQUM1QjtnQkFBTSxVQUFVLFFBQVEsV0FBVyxJQUFJLEdBQUcsV0FBVyxJQUVyRDs7O0FBRUk7QUFFUDtBQUhPO0FBS1I7Ozt3Q0FBZ0IsS0FBSyxNQUNqQjtnQkFBTSxrQkFBa0IsTUFBTSxVQUFVLElBQUk7NkJBQzNCLElBQ2I7Z0NBQWdCLENBRVgsc0JBQVUsS0FBUSxrQkFFbEIsMkNBQTJCLEtBQVEsYUFFbkMsc0JBQVUsS0FBUSxrQkFDbkIsVUFDRixLQUFLO0FBVFAsYUFEZ0I7QUFhaEI7b0NBR0o7QUFKSTs7aUJBSUMsUUFBUSxJQUViOzttQkFBTyxDQUFDLGFBQWEsS0FDeEI7QUF6RGlCIiwiZmlsZSI6IjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGNsYXNze1xyXG4gICAgY29uc3RydWN0b3IoKXt9XHJcblxyXG4gICAgaW5pdE1hcChzZXR0aW5ncyl7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHltYXBzLnJlYWR5KHJlc29sdmUpKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tYXAgPSBuZXcgeW1hcHMuTWFwKFwibWFwXCIsIHNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2x1c3RlciA9IG5ldyB5bWFwcy5DbHVzdGVyZXIoe1xyXG4gICAgICAgICAgICAgICAgY2x1c3RlckRpc2FibGVDbGlja1pvb206IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjbHVzdGVyT3BlbkJhbGxvb25PbkNsaWNrOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2x1c3RlckJhbGxvb25Db250ZW50TGF5b3V0OiAnY2x1c3RlciNiYWxsb29uQ2Fyb3VzZWwnLFxyXG4gICAgICAgICAgICAgICAgY2x1c3RlckJhbGxvb25QYW5lbE1heE1hcEFyZWE6IDAsXHJcbiAgICAgICAgICAgICAgICBjbHVzdGVyQmFsbG9vbkNvbnRlbnRMYXlvdXRXaWR0aDogMjAwLFxyXG4gICAgICAgICAgICAgICAgY2x1c3RlckJhbGxvb25Db250ZW50TGF5b3V0SGVpZ2h0OiAyNTAsXHJcbiAgICAgICAgICAgICAgICBjbHVzdGVyQmFsbG9vblBhZ2VyU2l6ZTogNSxcclxuICAgICAgICAgICAgICAgIGNsdXN0ZXJCYWxsb29uUGFnZXJWaXNpYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGNsdXN0ZXJPcGVuQmFsbG9vbk9uQ2xpY2s6IHRydWUsXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB0aGlzLm1hcC5nZW9PYmplY3RzLmFkZCh0aGlzLmNsdXN0ZXIpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFwO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0TWFwUG9zaXRpb24oZSl7XHJcbiAgICAgICAgY29uc3QgY29vcmRzID0gZS5nZXQoJ2Nvb3JkcycpO1xyXG4gICAgICAgIGNvbnN0IGdlb2NvZGUgPSBhd2FpdCB5bWFwcy5nZW9jb2RlKGNvb3Jkcyk7XHJcbiAgICAgICAgY29uc3QgYWRkcmVzcyA9IGdlb2NvZGUuZ2VvT2JqZWN0cy5nZXQoMCkucHJvcGVydGllcy5nZXQoJ3RleHQnKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY29vcmRzLFxyXG4gICAgICAgICAgICBhZGRyZXNzXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjcmVhdGVQbGFjZW1hcmsocG9zLCBodG1sKXtcclxuICAgICAgICBjb25zdCBteVBsYWNlbWFyayA9IG5ldyB5bWFwcy5QbGFjZW1hcmsocG9zLmNvb3JkcywgeyAgXHJcbiAgICAgICAgICAgIGhpbnRDb250ZW50OiBwb3MuYWRkcmVzcyxcclxuICAgICAgICAgICAgYmFsbG9vbkNvbnRlbnQ6IFtcclxuICAgICAgICAgICAgICAgICc8ZGl2PicsXHJcbiAgICAgICAgICAgICAgICBgPHN0cm9uZz4ke2h0bWxbMV19PC9zdHJvbmc+YCxcclxuICAgICAgICAgICAgICAgICc8YnIvPicsXHJcbiAgICAgICAgICAgICAgICBgPGEgY2xhc3M9J2xpbmsnIGhyZWY9JyMnPiR7aHRtbFswXX08L2E+YCxcclxuICAgICAgICAgICAgICAgICc8YnIvPicsXHJcbiAgICAgICAgICAgICAgICBgPHN0cm9uZz4ke2h0bWxbMl19PC9zdHJvbmc+YCxcclxuICAgICAgICAgICAgICAgICc8L2Rpdj4nXHJcbiAgICAgICAgICAgIF0uam9pbignJyksXHJcbiAgICAgICAgfSx7XHJcbiAgICAgICAgICAgIC8vaGlkZUljb25PbkJhbGxvb25PcGVuOiBmYWxzZVxyXG4gICAgICAgICAgICBvcGVuQmFsbG9vbk9uQ2xpY2s6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jbHVzdGVyLmFkZChteVBsYWNlbWFyaylcclxuXHJcbiAgICAgICAgcmV0dXJuIFtteVBsYWNlbWFyaywgdGhpcy5jbHVzdGVyXTtcclxuICAgIH1cclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zY3JpcHRzL21vZHVsZXMvYXBpLnlhbmRleC5tYXAuanMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n")}]);
!function(n){function g(I){if(t[I])return t[I].exports;var r=t[I]={i:I,l:!1,exports:{}};return n[I].call(r.exports,r,r.exports,g),r.l=!0,r.exports}var t={};g.m=n,g.c=t,g.d=function(n,t,I){g.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:I})},g.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return g.d(t,"a",t),t},g.o=function(n,g){return Object.prototype.hasOwnProperty.call(n,g)},g.p="",g(g.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\n\n//подключаем на страницу vk\n\nVK.init({\n    // apiId: 6759975\n    apiId: 6760009\n});\n\nfunction Auth() {\n    return new Promise(function (resolve) {\n        VK.Auth.login(function (data) {\n            if (data.session) {\n                resolve(true);\n            } else {\n                //reject(new Error('Failed to login'));\n                resolve(false);\n            }\n        });\n    });\n}\n\nfunction callAPI(method, params) {\n    params.v = '5.92';\n\n    return new Promise(function (resolve, reject) {\n        VK.api(method, params, function (data) {\n            if (data.error) {\n                reject(data.error);\n            } else {\n                resolve(data.response);\n            }\n        });\n    });\n}\n\nasync function mockOn() {\n    console.error('failed to login, the data will be load from local file');\n    // Parse JSON string into object   \n    var friendsObj = await loadJSON().then(function (responce) {\n        return JSON.parse(responce);\n    });\n\n    //console.log(friendsObj);  \n    return friendsObj;\n}\n\nfunction loadJSON() {\n    return new Promise(function (resolve) {\n        var xobj = new XMLHttpRequest();\n        xobj.overrideMimeType(\"application/json\");\n        xobj.open('GET', 'assets/data/friends_list.json', true);\n        xobj.onreadystatechange = function () {\n            if (xobj.readyState == 4 && xobj.status == \"200\") {\n                // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode\n                resolve(xobj.responseText);\n            }\n        };\n        xobj.send(null);\n    });\n}\n\nAuth().then(function (answer) {\n    console.log(answer);\n    if (answer) {\n        // return callAPI('users.get', {})    \n        return callAPI('friends.get', { fields: 'photo_100' });\n    } else {\n        new Error('Failed to login');\n        return mockOn();\n    }\n}).then(function (friends) {\n    if (!localStorage.targetData || localStorage.targetData === '') {\n        renderFriends(friends, document.querySelector('#friends_template_left').textContent, document.querySelector('#source_list'));\n\n        renderFriends({ items: [] }, document.querySelector('#friends_template_right').textContent, document.querySelector('#target_list'));\n    } else {\n        renderFromStorage(friends.items);\n    }\n\n    var source_zone = document.querySelector('#source_zone');\n    var target_zone = document.querySelector('#target_zone');\n\n    makeDnD(source_zone, target_zone);\n});\n\nvar btn = document.querySelector('button');\n\ndocument.addEventListener('click', function (e) {\n    if (e.target.classList.contains('friend')) {\n        var rect = e.target.getBoundingClientRect();\n        if (e.clientX > rect.left + rect.width - 15 && e.clientY > rect.top + rect.height / 3 && e.clientY < rect.top + 2 * rect.height / 3) {\n            moveFriend(e.target);\n        }\n    }\n});\n\nbtn.addEventListener('click', function () {\n\n    if (localStorage.targetData) {\n        localStorage.targetData = '';\n    }\n\n    var target = document.querySelector('#target_zone');\n    var stringData = [];\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n        for (var _iterator = target.children[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var friend = _step.value;\n\n            stringData.push(friend.getAttribute('id'));\n        }\n    } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n            }\n        } finally {\n            if (_didIteratorError) {\n                throw _iteratorError;\n            }\n        }\n    }\n\n    localStorage.targetData = stringData;\n});\n\ndocument.addEventListener('keyup', function (e) {\n    if (e.target.classList.contains('input')) {\n        var half = e.target.closest('.half');\n        if (!e.target.value) {\n            noFilter(half.querySelector('.friends-list'));\n            return;\n        }\n        dressCode(e.target.value, half.querySelector('.friends-list'));\n    }\n});\n\nfunction renderFromStorage(vk_items) {\n    var storage_list = loadStorage();\n    var right_friends = { items: [] };\n    var left_friends = { items: [] };\n    var i = 0;\n\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n        for (var _iterator2 = vk_items[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var item = _step2.value;\n\n            if (i < storage_list.length) {\n                if (item.id === storage_list[i]) {\n                    right_friends.items.push(item);\n                    console.log(vk_items.length);\n                    i++;\n                } else {\n                    left_friends.items.push(item);\n                }\n            } else {\n                left_friends.items.push(item);\n            }\n        }\n    } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                _iterator2.return();\n            }\n        } finally {\n            if (_didIteratorError2) {\n                throw _iteratorError2;\n            }\n        }\n    }\n\n    renderFriends(left_friends, document.querySelector('#friends_template_left').textContent, document.querySelector('#source_list'));\n\n    renderFriends(right_friends, document.querySelector('#friends_template_right').textContent, document.querySelector('#target_list'));\n}\n\nfunction renderFriends(friends, template, parent) {\n    var render = Handlebars.compile(template);\n    var html = render(friends);\n    parent.innerHTML = html;\n}\n\nfunction loadStorage() {\n    if (localStorage.targetData && localStorage.targetData !== '') {\n        var id_list = [];\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n            for (var _iterator3 = localStorage.targetData.split(',')[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                var elem = _step3.value;\n\n                id_list.push(parseInt(elem));\n            }\n        } catch (err) {\n            _didIteratorError3 = true;\n            _iteratorError3 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                    _iterator3.return();\n                }\n            } finally {\n                if (_didIteratorError3) {\n                    throw _iteratorError3;\n                }\n            }\n        }\n\n        return id_list.sort(function (a, b) {\n            return a - b;\n        });\n    }\n}\n\nfunction noFilter(friends) {\n    if (friends.innerHTML) {\n        var _iteratorNormalCompletion4 = true;\n        var _didIteratorError4 = false;\n        var _iteratorError4 = undefined;\n\n        try {\n            for (var _iterator4 = friends.children[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                var friend = _step4.value;\n\n                friend.style.display = \"flex\";\n            }\n        } catch (err) {\n            _didIteratorError4 = true;\n            _iteratorError4 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion4 && _iterator4.return) {\n                    _iterator4.return();\n                }\n            } finally {\n                if (_didIteratorError4) {\n                    throw _iteratorError4;\n                }\n            }\n        }\n    }\n}\n\nfunction dressCode(chunk, friends) {\n    if (friends.innerHTML) {\n        var _iteratorNormalCompletion5 = true;\n        var _didIteratorError5 = false;\n        var _iteratorError5 = undefined;\n\n        try {\n            for (var _iterator5 = friends.children[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n                var friend = _step5.value;\n\n                if (isMatching(friend.querySelector('#friend_name').innerHTML, chunk)) {\n                    friend.style.display = \"flex\";\n                } else {\n                    friend.style.display = \"none\";\n                }\n            }\n        } catch (err) {\n            _didIteratorError5 = true;\n            _iteratorError5 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion5 && _iterator5.return) {\n                    _iterator5.return();\n                }\n            } finally {\n                if (_didIteratorError5) {\n                    throw _iteratorError5;\n                }\n            }\n        }\n    }\n}\n\nfunction isMatching(full, chunk) {\n    function checkMatch(index) {\n        var _iteratorNormalCompletion6 = true;\n        var _didIteratorError6 = false;\n        var _iteratorError6 = undefined;\n\n        try {\n            for (var _iterator6 = chunkArr[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n                var char = _step6.value;\n\n                if (fullArr[index] !== char) {\n                    return false;\n                }\n                index++;\n            }\n        } catch (err) {\n            _didIteratorError6 = true;\n            _iteratorError6 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion6 && _iterator6.return) {\n                    _iterator6.return();\n                }\n            } finally {\n                if (_didIteratorError6) {\n                    throw _iteratorError6;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    var fullArr = full.toUpperCase().split('');\n    var chunkArr = chunk.toUpperCase().split('');\n\n    for (var i = 0; i < fullArr.length; i++) {\n        if (chunkArr[0] === fullArr[i]) {\n            if (fullArr.lenght - i < chunkArr.length) {\n                return false;\n            }\n            if (checkMatch(i)) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction checkFilter(friend, target_zone) {\n    var half = target_zone.closest('.half');\n    var filter = half.querySelector('#filter');\n    if (filter.value !== '') {\n        if (!isMatching(friend.querySelector('#friend_name').innerHTML, filter.value)) {\n            friend.style.display = \"none\";\n        }\n    }\n}\n\nfunction moveFriend(friend_node) {\n    // не понимаю почему не видит определнне выше source и target \n    // даже если передать их как аргументы??\n    var source = document.querySelector('#source_zone');\n    var target = document.querySelector('#target_zone');\n\n    toggleFriendClass(friend_node);\n\n    if (friend_node.parentNode === source) {\n        checkFilter(friend_node, target);\n        target.appendChild(friend_node);\n    } else {\n        checkFilter(friend_node, source);\n        source.appendChild(friend_node);\n    }\n}\n\nfunction toggleFriendClass(friend_node) {\n    friend_node.classList.toggle('friend-right');\n    friend_node.classList.toggle('friend-left');\n}\n\nfunction makeDnD(z_source, z_target) {\n    var currentDrag = void 0;\n\n    //z_source.addEventListener('dragstart', (e) => {\n    document.addEventListener('dragstart', function (e) {\n        currentDrag = { 'source': z_source, 'node': e.target };\n    });\n\n    //z_source.addEventListener('dragover', (e) => {\n    document.addEventListener('dragover', function (e) {\n        e.preventDefault();\n    });\n\n    //z_target.addEventListener('drop', (e) => {\n    document.addEventListener('drop', function (e) {\n        if (currentDrag) {\n            e.preventDefault();\n\n            if (e.target === z_target || e.target.parentNode === z_target || e.target.parentNode.parentNode === z_target) {\n\n                toggleFriendClass(currentDrag.node);\n                checkFilter(currentDrag.node, z_target);\n\n                if (e.target !== z_target) {\n                    z_target.insertBefore(currentDrag.node, e.target.nextElementSibling);\n                } else {\n                    z_target.appendChild(currentDrag.node);\n                }\n\n                currentDrag = null;\n            }\n        }\n    });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbmRleC5qcz8zOWZlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0E7O0FBRUEsR0FBRztBQUVDO1dBQU87QUFEUjs7QUFLSCxTQUFTLE9BQ0w7ZUFBVyxRQUFTLG1CQUNoQjtXQUFHLEtBQUssTUFBTSxnQkFDVjtnQkFBRyxLQUFLLFNBQ0o7d0JBQ0g7QUFGRCxtQkFHSTtBQUNBO3dCQUNIO0FBQ0o7QUFDSjtBQUNKLEtBVlU7OztBQVlYLFNBQVMsUUFBUSxRQUFRLFFBQ3JCO1dBQU8sSUFFUDs7ZUFBVyxRQUFRLFVBQUMsU0FBUSxRQUN4QjtXQUFHLElBQUksUUFBUSxRQUFTLGdCQUNwQjtnQkFBRyxLQUFLLE9BQ0o7dUJBQU8sS0FDVjtBQUZELG1CQUdJO3dCQUFRLEtBQ1g7QUFDSjtBQUNKO0FBRUosS0FWVTs7O0FBWVgsZUFBZSxTQUNYO1lBQVEsTUFDSjtBQUNKO1FBQUksYUFBYSxpQkFBaUIsS0FBSyxvQkFDbkM7ZUFBTyxLQUFLLE1BQ2Y7QUFFRCxLQUp1Qjs7QUFLdkI7V0FDSDs7O0FBRUQsU0FBUyxXQUNMO2VBQVcsUUFBUyxtQkFDcEI7WUFBSSxPQUFPLElBQ1g7YUFBSyxpQkFDTDthQUFLLEtBQUssT0FBTyxpQ0FDakI7YUFBSyxxQkFBcUIsWUFDbEI7Z0JBQUksS0FBSyxjQUFjLEtBQUssS0FBSyxVQUFVLE9BQzNDO0FBQ0E7d0JBQVEsS0FDUjtBQUNQO0FBQ0Q7YUFBSyxLQUNKO0FBQ0osS0FaVTs7O0FBZ0JYLE9BQ0ssS0FBTSxrQkFDSDtZQUFRLElBQ1I7UUFBSSxRQUNMO0FBQ0s7ZUFBTyxRQUFRLGVBQWUsRUFBQyxRQUNsQztBQUhELFdBSUk7WUFBSSxNQUNKO2VBQ0g7QUFDSjtBQVZMLEdBV0ssS0FBSyxtQkFDRjtRQUFJLENBQUMsYUFBYSxjQUFjLGFBQWEsZUFBZSxJQUN4RDtzQkFBYyxTQUFTLFNBQVMsY0FBYywwQkFBMEIsYUFDeEUsU0FBUyxjQUVUOztzQkFBYyxFQUFD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QUFZLE1BRXhCOztvQkFBRyxFQUFFLFdBQVcsVUFDWjs2QkFBUyxhQUFhLFlBQVksTUFBTSxFQUFFLE9BRTdDO0FBSEQsdUJBSUk7NkJBQVMsWUFBWSxZQUN4QjtBQUVEOzs4QkFDSDtBQUNKO0FBQ0o7QUFFSiIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi8v0L/QvtC00LrQu9GO0YfQsNC10Lwg0L3QsCDRgdGC0YDQsNC90LjRhtGDIHZrXHJcblxyXG5WSy5pbml0KHtcclxuICAgLy8gYXBpSWQ6IDY3NTk5NzVcclxuICAgIGFwaUlkOiA2NzYwMDA5XHJcbn0pO1xyXG5cclxuXHJcbmZ1bmN0aW9uIEF1dGgoKXtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIFZLLkF1dGgubG9naW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGlmKGRhdGEuc2Vzc2lvbil7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL3JlamVjdChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2dpbicpKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbGxBUEkobWV0aG9kLCBwYXJhbXMpe1xyXG4gICAgcGFyYW1zLnYgPSAnNS45Mic7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCkgPT4ge1xyXG4gICAgICAgIFZLLmFwaShtZXRob2QsIHBhcmFtcywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgaWYoZGF0YS5lcnJvcil7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YS5yZXNwb25zZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gbW9ja09uKCkge1xyXG4gICAgY29uc29sZS5lcnJvcignZmFpbGVkIHRvIGxvZ2luLCB0aGUgZGF0YSB3aWxsIGJlIGxvYWQgZnJvbSBsb2NhbCBmaWxlJyk7XHJcbiAgICAgICAgLy8gUGFyc2UgSlNPTiBzdHJpbmcgaW50byBvYmplY3QgICBcclxuICAgIHZhciBmcmllbmRzT2JqID0gYXdhaXQgbG9hZEpTT04oKS50aGVuKHJlc3BvbmNlID0+IHtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShyZXNwb25jZSk7XHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICAvL2NvbnNvbGUubG9nKGZyaWVuZHNPYmopOyAgXHJcbiAgICByZXR1cm4gZnJpZW5kc09iajsgICAgICBcclxufVxyXG4gXHJcbmZ1bmN0aW9uIGxvYWRKU09OKCkgeyBcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgdmFyIHhvYmogPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHhvYmoub3ZlcnJpZGVNaW1lVHlwZShcImFwcGxpY2F0aW9uL2pzb25cIik7XHJcbiAgICB4b2JqLm9wZW4oJ0dFVCcsICdhc3NldHMvZGF0YS9mcmllbmRzX2xpc3QuanNvbicsIHRydWUpOyBcclxuICAgIHhvYmoub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoeG9iai5yZWFkeVN0YXRlID09IDQgJiYgeG9iai5zdGF0dXMgPT0gXCIyMDBcIikge1xyXG4gICAgICAgICAgICAvLyBSZXF1aXJlZCB1c2Ugb2YgYW4gYW5vbnltb3VzIGNhbGxiYWNrIGFzIC5vcGVuIHdpbGwgTk9UIHJldHVybiBhIHZhbHVlIGJ1dCBzaW1wbHkgcmV0dXJucyB1bmRlZmluZWQgaW4gYXN5bmNocm9ub3VzIG1vZGVcclxuICAgICAgICAgICAgcmVzb2x2ZSh4b2JqLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHhvYmouc2VuZChudWxsKTsgXHJcbiAgICB9KVxyXG59XHJcblxyXG5cclxuXHJcbkF1dGgoKVxyXG4gICAgLnRoZW4oKGFuc3dlcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGFuc3dlcilcclxuICAgICAgICBpZiAoYW5zd2VyKXtcclxuICAgICAgIC8vIHJldHVybiBjYWxsQVBJKCd1c2Vycy5nZXQnLCB7fSkgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsQVBJKCdmcmllbmRzLmdldCcsIHtmaWVsZHM6ICdwaG90b18xMDAnfSlcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgbmV3IEVycm9yKCdGYWlsZWQgdG8gbG9naW4nKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1vY2tPbigpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICAudGhlbihmcmllbmRzID0+IHsgICAgICAgIFxyXG4gICAgICAgIGlmICghbG9jYWxTdG9yYWdlLnRhcmdldERhdGEgfHwgbG9jYWxTdG9yYWdlLnRhcmdldERhdGEgPT09ICcnKXtcclxuICAgICAgICAgICAgcmVuZGVyRnJpZW5kcyhmcmllbmRzLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZnJpZW5kc190ZW1wbGF0ZV9sZWZ0JykudGV4dENvbnRlbnQsIFxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc291cmNlX2xpc3QnKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZW5kZXJGcmllbmRzKHtpdGVtczpbXX0sIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmcmllbmRzX3RlbXBsYXRlX3JpZ2h0JykudGV4dENvbnRlbnQsIFxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFyZ2V0X2xpc3QnKSk7XHJcbiAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgcmVuZGVyRnJvbVN0b3JhZ2UoZnJpZW5kcy5pdGVtcyk7XHJcbiAgICAgICAgfSAgIFxyXG5cclxuICAgICAgICB2YXIgc291cmNlX3pvbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc291cmNlX3pvbmUnKTtcclxuICAgICAgICB2YXIgdGFyZ2V0X3pvbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFyZ2V0X3pvbmUnKTtcclxuICAgICAgICBcclxuICAgICAgICBtYWtlRG5EKHNvdXJjZV96b25lLCB0YXJnZXRfem9uZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgfSk7XHJcblxyXG5cclxuY29uc3QgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uJyk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZnJpZW5kJykpe1xyXG4gICAgICAgIHZhciByZWN0ID0gZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgaWYoZS5jbGllbnRYID4gcmVjdC5sZWZ0K3JlY3Qud2lkdGgtMTUgXHJcbiAgICAgICAgICAgICYmIGUuY2xpZW50WSA+IHJlY3QudG9wK3JlY3QuaGVpZ2h0LzMgXHJcbiAgICAgICAgICAgICYmIGUuY2xpZW50WSA8IHJlY3QudG9wKzIqcmVjdC5oZWlnaHQvMyl7XHJcbiAgICAgICAgICAgIG1vdmVGcmllbmQoZS50YXJnZXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSlcclxuXHJcbmJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHJcbiAgICBpZihsb2NhbFN0b3JhZ2UudGFyZ2V0RGF0YSl7XHJcbiAgICBsb2NhbFN0b3JhZ2UudGFyZ2V0RGF0YSA9ICcnOyAgICBcclxuICAgIH1cclxuICAgIFxyXG4gICAgbGV0IHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YXJnZXRfem9uZScpOyAgICAgICBcclxuICAgIGxldCBzdHJpbmdEYXRhID0gW107XHJcbiAgICBmb3IgKHZhciBmcmllbmQgb2YgdGFyZ2V0LmNoaWxkcmVuKXsgICAgICAgICAgICBcclxuICAgICAgICBzdHJpbmdEYXRhLnB1c2goZnJpZW5kLmdldEF0dHJpYnV0ZSgnaWQnKSlcclxuICAgIH0gICAgXHJcbiAgICBsb2NhbFN0b3JhZ2UudGFyZ2V0RGF0YSA9IHN0cmluZ0RhdGE7ICAgICAgICAgICAgXHJcbn0pXHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChlKSA9PiB7IFxyXG4gICAgaWYoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbnB1dCcpKXtcclxuICAgICAgICBsZXQgaGFsZiA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5oYWxmJyk7IFxyXG4gICAgICAgIGlmICghZS50YXJnZXQudmFsdWUpIHtcclxuICAgICAgICAgICAgbm9GaWx0ZXIgKGhhbGYucXVlcnlTZWxlY3RvcignLmZyaWVuZHMtbGlzdCcpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkcmVzc0NvZGUoZS50YXJnZXQudmFsdWUsIGhhbGYucXVlcnlTZWxlY3RvcignLmZyaWVuZHMtbGlzdCcpKTtcclxuICAgIH1cclxufSlcclxuXHJcbmZ1bmN0aW9uIHJlbmRlckZyb21TdG9yYWdlKHZrX2l0ZW1zKXtcclxuICAgIHZhciBzdG9yYWdlX2xpc3QgPSBsb2FkU3RvcmFnZSgpO1xyXG4gICAgdmFyIHJpZ2h0X2ZyaWVuZHM9e2l0ZW1zOltdfTtcclxuICAgIHZhciBsZWZ0X2ZyaWVuZHMgPSB7aXRlbXM6W119O1xyXG4gICAgdmFyIGkgPSAwO1xyXG5cclxuICAgIGZvcih2YXIgaXRlbSBvZiB2a19pdGVtcyl7XHJcbiAgICAgICAgaWYgKGkgPCBzdG9yYWdlX2xpc3QubGVuZ3RoKXsgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZihpdGVtLmlkID09PSBzdG9yYWdlX2xpc3RbaV0pe1xyXG4gICAgICAgICAgICAgICAgcmlnaHRfZnJpZW5kcy5pdGVtcy5wdXNoKGl0ZW0pICBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZrX2l0ZW1zLmxlbmd0aCkgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaSsrOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxlZnRfZnJpZW5kcy5pdGVtcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgbGVmdF9mcmllbmRzLml0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfSAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgfSBcclxuXHJcbiAgICByZW5kZXJGcmllbmRzKGxlZnRfZnJpZW5kcywgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZyaWVuZHNfdGVtcGxhdGVfbGVmdCcpLnRleHRDb250ZW50LCBcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzb3VyY2VfbGlzdCcpKTtcclxuICAgICAgICBcclxuICAgIHJlbmRlckZyaWVuZHMocmlnaHRfZnJpZW5kcywgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZyaWVuZHNfdGVtcGxhdGVfcmlnaHQnKS50ZXh0Q29udGVudCwgXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFyZ2V0X2xpc3QnKSkgXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckZyaWVuZHMoZnJpZW5kcywgdGVtcGxhdGUsIHBhcmVudCkge1xyXG4gICAgY29uc3QgcmVuZGVyID0gSGFuZGxlYmFycy5jb21waWxlKHRlbXBsYXRlKTtcclxuICAgIGNvbnN0IGh0bWwgPSByZW5kZXIoZnJpZW5kcyk7XHJcbiAgICBwYXJlbnQuaW5uZXJIVE1MID0gaHRtbDtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZFN0b3JhZ2UoKXtcclxuICAgIGlmKGxvY2FsU3RvcmFnZS50YXJnZXREYXRhICYmIGxvY2FsU3RvcmFnZS50YXJnZXREYXRhICE9PSAnJyl7XHJcbiAgICAgICAgdmFyIGlkX2xpc3QgPSBbXTsgXHJcbiAgICAgICAgZm9yICh2YXIgZWxlbSBvZiBsb2NhbFN0b3JhZ2UudGFyZ2V0RGF0YS5zcGxpdCgnLCcpKXtcclxuICAgICAgICAgICAgaWRfbGlzdC5wdXNoKHBhcnNlSW50KGVsZW0pKTtcclxuICAgICAgICB9ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIHJldHVybiBpZF9saXN0LnNvcnQoZnVuY3Rpb24oYSwgYil7cmV0dXJuIGEgLSBifSk7ICBcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbm9GaWx0ZXIgKGZyaWVuZHMpe1xyXG4gICAgaWYgKGZyaWVuZHMuaW5uZXJIVE1MKXsgICAgICAgIFxyXG4gICAgICAgIGZvcihsZXQgZnJpZW5kIG9mIGZyaWVuZHMuY2hpbGRyZW4pe1xyXG4gICAgICAgICAgICBmcmllbmQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4gICAgICAgICAgICBcclxuZnVuY3Rpb24gZHJlc3NDb2RlIChjaHVuaywgZnJpZW5kcykgeyAgICBcclxuICAgIGlmIChmcmllbmRzLmlubmVySFRNTCl7ICAgICAgICBcclxuICAgICAgICBmb3IobGV0IGZyaWVuZCBvZiBmcmllbmRzLmNoaWxkcmVuKXtcclxuICAgICAgICAgICAgaWYgKGlzTWF0Y2hpbmcgKGZyaWVuZC5xdWVyeVNlbGVjdG9yKCcjZnJpZW5kX25hbWUnKS5pbm5lckhUTUwsIGNodW5rKSkgeyBcclxuICAgICAgICAgICAgICAgIGZyaWVuZC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmcmllbmQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICB9ICAgXHJcbiAgICAgICAgfSAgICAgICAgICAgICAgXHJcbiAgICB9ICAgIFxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaXNNYXRjaGluZyAoZnVsbCwgY2h1bmspIHsgIFxyXG4gICAgZnVuY3Rpb24gY2hlY2tNYXRjaCAoaW5kZXgpIHtcclxuICAgICAgICBmb3IgKHZhciBjaGFyIG9mIGNodW5rQXJyKSB7XHJcbiAgICAgICAgICAgIGlmIChmdWxsQXJyW2luZGV4XSAhPT0gY2hhcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBmdWxsQXJyID0gZnVsbC50b1VwcGVyQ2FzZSgpLnNwbGl0KCcnKTtcclxuICAgIHZhciBjaHVua0FyciA9IGNodW5rLnRvVXBwZXJDYXNlKCkuc3BsaXQoJycpO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpPCBmdWxsQXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGNodW5rQXJyWzBdID09PSBmdWxsQXJyW2ldKSB7XHJcbiAgICAgICAgICAgIGlmIChmdWxsQXJyLmxlbmdodCAtIGkgPCBjaHVua0Fyci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2hlY2tNYXRjaChpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlOyAgXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrRmlsdGVyKGZyaWVuZCwgdGFyZ2V0X3pvbmUpe1xyXG4gICAgbGV0IGhhbGYgPSB0YXJnZXRfem9uZS5jbG9zZXN0KCcuaGFsZicpOyBcclxuICAgIGxldCBmaWx0ZXIgPSBoYWxmLnF1ZXJ5U2VsZWN0b3IoJyNmaWx0ZXInKTtcclxuICAgIGlmIChmaWx0ZXIudmFsdWUgIT09ICcnKXtcclxuICAgICAgICBpZiAoIWlzTWF0Y2hpbmcgKGZyaWVuZC5xdWVyeVNlbGVjdG9yKCcjZnJpZW5kX25hbWUnKS5pbm5lckhUTUwsIGZpbHRlci52YWx1ZSkpIHtcclxuICAgICAgICAgICAgZnJpZW5kLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1vdmVGcmllbmQoZnJpZW5kX25vZGUpe1xyXG4gICAgLy8g0L3QtSDQv9C+0L3QuNC80LDRjiDQv9C+0YfQtdC80YMg0L3QtSDQstC40LTQuNGCINC+0L/RgNC10LTQtdC70L3QvdC1INCy0YvRiNC1IHNvdXJjZSDQuCB0YXJnZXQgXHJcbiAgICAvLyDQtNCw0LbQtSDQtdGB0LvQuCDQv9C10YDQtdC00LDRgtGMINC40YUg0LrQsNC6INCw0YDQs9GD0LzQtdC90YLRiz8/XHJcbiAgICBsZXQgc291cmNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NvdXJjZV96b25lJyk7XHJcbiAgICBsZXQgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RhcmdldF96b25lJyk7XHJcblxyXG4gICAgdG9nZ2xlRnJpZW5kQ2xhc3MoZnJpZW5kX25vZGUpO1xyXG5cclxuICAgIGlmKGZyaWVuZF9ub2RlLnBhcmVudE5vZGUgPT09IHNvdXJjZSl7XHJcbiAgICAgICAgY2hlY2tGaWx0ZXIoZnJpZW5kX25vZGUsIHRhcmdldCk7XHJcbiAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGZyaWVuZF9ub2RlKTtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNoZWNrRmlsdGVyKGZyaWVuZF9ub2RlLCBzb3VyY2UpO1xyXG4gICAgICAgIHNvdXJjZS5hcHBlbmRDaGlsZChmcmllbmRfbm9kZSlcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlRnJpZW5kQ2xhc3MoZnJpZW5kX25vZGUpe1xyXG4gICAgZnJpZW5kX25vZGUuY2xhc3NMaXN0LnRvZ2dsZSgnZnJpZW5kLXJpZ2h0Jyk7XHJcbiAgICBmcmllbmRfbm9kZS5jbGFzc0xpc3QudG9nZ2xlKCdmcmllbmQtbGVmdCcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlRG5EKHpfc291cmNlLCB6X3RhcmdldCl7XHJcbiAgICBsZXQgY3VycmVudERyYWc7XHJcbiAgICBcclxuICAgIC8vel9zb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgKGUpID0+IHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIChlKSA9PiB7XHJcbiAgICAgICAgY3VycmVudERyYWcgPSB7J3NvdXJjZSc6IHpfc291cmNlLCAnbm9kZSc6IGUudGFyZ2V0fTtcclxuICAgIH0pXHJcblxyXG4gICAgLy96X3NvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChlKSA9PiB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChlKSA9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSlcclxuXHJcbiAgICAvL3pfdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCAoZSkgPT4ge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIChlKSA9PiB7XHJcbiAgICAgICAgaWYoY3VycmVudERyYWcpe1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IFxyXG5cclxuICAgICAgICAgICAgaWYoZS50YXJnZXQgPT09IHpfdGFyZ2V0IFxyXG4gICAgICAgICAgICAgICAgfHwgZS50YXJnZXQucGFyZW50Tm9kZSA9PT0gel90YXJnZXQgXHJcbiAgICAgICAgICAgICAgICB8fCBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUgPT09IHpfdGFyZ2V0KXsgICAgICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIHRvZ2dsZUZyaWVuZENsYXNzKGN1cnJlbnREcmFnLm5vZGUpXHJcbiAgICAgICAgICAgICAgICBjaGVja0ZpbHRlcihjdXJyZW50RHJhZy5ub2RlLCB6X3RhcmdldCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoZS50YXJnZXQgIT09IHpfdGFyZ2V0KXtcclxuICAgICAgICAgICAgICAgICAgICB6X3RhcmdldC5pbnNlcnRCZWZvcmUoY3VycmVudERyYWcubm9kZSwgZS50YXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgel90YXJnZXQuYXBwZW5kQ2hpbGQoY3VycmVudERyYWcubm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGN1cnJlbnREcmFnID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NjcmlwdHMvaW5kZXguanMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")}]);
!function(n){function t(r){if(g[r])return g[r].exports;var e=g[r]={i:r,l:!1,exports:{}};return n[r].call(e.exports,e,e.exports,t),e.l=!0,e.exports}var g={};t.m=n,t.c=g,t.d=function(n,g,r){t.o(n,g)||Object.defineProperty(n,g,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var g=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(g,"a",g),g},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\n\n//подключаем на страницу vk\n\nVK.init({\n    // apiId: 6759975\n    apiId: 6760009\n});\n\nfunction Auth() {\n    return new Promise(function (resolve, reject) {\n        VK.Auth.login(function (data) {\n            if (data.session) {\n                resolve();\n            } else {\n                reject(new Error('Failed to login'));\n            }\n        });\n    });\n}\n\nfunction callAPI(method, params) {\n    params.v = '5.92';\n\n    return new Promise(function (resolve, reject) {\n        VK.api(method, params, function (data) {\n            if (data.error) {\n                reject(data.error);\n            } else {\n                resolve(data.response);\n            }\n        });\n    });\n}\n\nAuth().then(function () {\n    // return callAPI('users.get', {})\n    return callAPI('friends.get', { fields: 'photo_100' });\n}).then(function (friends) {\n    //console.log(localStorage.length);\n    if (!localStorage.targetData || localStorage.targetData === '') {\n        renderFriends(friends, document.querySelector('#friends_template_left').textContent, document.querySelector('#source_list'));\n\n        renderFriends({ items: [] }, document.querySelector('#friends_template_right').textContent, document.querySelector('#target_list'));\n    } else {\n        renderFromStorage(friends.items);\n    }\n\n    var source_zone = document.querySelector('#source_zone');\n    var target_zone = document.querySelector('#target_zone');\n\n    makeDnD(source_zone, target_zone);\n});\n\nvar btn = document.querySelector('button');\n\ndocument.addEventListener('click', function (e) {\n    if (e.target.classList.contains('friend')) {\n        var rect = e.target.getBoundingClientRect();\n        if (e.clientX > rect.left + rect.width - 15 && e.clientY > rect.top + rect.height / 3 && e.clientY < rect.top + 2 * rect.height / 3) {\n            moveFriend(e.target);\n        }\n    }\n});\n\nbtn.addEventListener('click', function () {\n\n    if (localStorage.targetData) {\n        localStorage.targetData = '';\n        //console.log(localStorage.length)    \n    }\n\n    var target = document.querySelector('#target_zone');\n    var stringData = [];\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n        for (var _iterator = target.children[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var friend = _step.value;\n\n            stringData.push(friend.getAttribute('id'));\n        }\n    } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n            }\n        } finally {\n            if (_didIteratorError) {\n                throw _iteratorError;\n            }\n        }\n    }\n\n    localStorage.targetData = stringData;\n});\n\ndocument.addEventListener('keyup', function (e) {\n    if (e.target.classList.contains('input')) {\n        var half = e.target.closest('.half');\n        if (!e.target.value) {\n            noFilter(half.querySelector('.friends-list'));\n            return;\n        }\n        dressCode(e.target.value, half.querySelector('.friends-list'));\n    }\n});\n\nfunction renderFromStorage(vk_items) {\n    var storage_list = loadStorage();\n    var right_friends = { items: [] };\n    var left_friends = { items: [] };\n    var i = 0;\n\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n        for (var _iterator2 = vk_items[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var item = _step2.value;\n\n            if (i < storage_list.length) {\n                //console.log(item.id)  \n                //console.log(item.last_name)           \n                if (item.id === storage_list[i]) {\n                    right_friends.items.push(item);\n                    console.log(vk_items.length);\n                    i++;\n                } else {\n                    left_friends.items.push(item);\n                }\n            } else {\n                left_friends.items.push(item);\n            }\n        }\n    } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                _iterator2.return();\n            }\n        } finally {\n            if (_didIteratorError2) {\n                throw _iteratorError2;\n            }\n        }\n    }\n\n    console.log(right_friends);\n    renderFriends(left_friends, document.querySelector('#friends_template_left').textContent, document.querySelector('#source_list'));\n\n    renderFriends(right_friends, document.querySelector('#friends_template_right').textContent, document.querySelector('#target_list'));\n}\n\nfunction renderFriends(friends, template, parent) {\n    var render = Handlebars.compile(template);\n    var html = render(friends);\n    parent.innerHTML = html;\n}\n\nfunction loadStorage() {\n    if (localStorage.targetData && localStorage.targetData !== '') {\n        var id_list = [];\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n            for (var _iterator3 = localStorage.targetData.split(',')[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                var elem = _step3.value;\n\n                id_list.push(parseInt(elem));\n            }\n            //console.log(id_list)\n        } catch (err) {\n            _didIteratorError3 = true;\n            _iteratorError3 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                    _iterator3.return();\n                }\n            } finally {\n                if (_didIteratorError3) {\n                    throw _iteratorError3;\n                }\n            }\n        }\n\n        return id_list.sort(function (a, b) {\n            return a - b;\n        });\n    }\n}\n\nfunction noFilter(friends) {\n    if (friends.innerHTML) {\n        var _iteratorNormalCompletion4 = true;\n        var _didIteratorError4 = false;\n        var _iteratorError4 = undefined;\n\n        try {\n            for (var _iterator4 = friends.children[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                var friend = _step4.value;\n\n                friend.style.display = \"flex\";\n            }\n        } catch (err) {\n            _didIteratorError4 = true;\n            _iteratorError4 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion4 && _iterator4.return) {\n                    _iterator4.return();\n                }\n            } finally {\n                if (_didIteratorError4) {\n                    throw _iteratorError4;\n                }\n            }\n        }\n    }\n}\n\nfunction dressCode(chunk, friends) {\n    if (friends.innerHTML) {\n        var _iteratorNormalCompletion5 = true;\n        var _didIteratorError5 = false;\n        var _iteratorError5 = undefined;\n\n        try {\n            for (var _iterator5 = friends.children[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n                var friend = _step5.value;\n\n                if (isMatching(friend.querySelector('#friend_name').innerHTML, chunk)) {\n                    friend.style.display = \"flex\";\n                } else {\n                    friend.style.display = \"none\";\n                }\n            }\n        } catch (err) {\n            _didIteratorError5 = true;\n            _iteratorError5 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion5 && _iterator5.return) {\n                    _iterator5.return();\n                }\n            } finally {\n                if (_didIteratorError5) {\n                    throw _iteratorError5;\n                }\n            }\n        }\n    }\n}\n\nfunction isMatching(full, chunk) {\n    function checkMatch(index) {\n        var _iteratorNormalCompletion6 = true;\n        var _didIteratorError6 = false;\n        var _iteratorError6 = undefined;\n\n        try {\n            for (var _iterator6 = chunkArr[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n                var char = _step6.value;\n\n                if (fullArr[index] !== char) {\n                    return false;\n                }\n                index++;\n            }\n        } catch (err) {\n            _didIteratorError6 = true;\n            _iteratorError6 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion6 && _iterator6.return) {\n                    _iterator6.return();\n                }\n            } finally {\n                if (_didIteratorError6) {\n                    throw _iteratorError6;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    var fullArr = full.toUpperCase().split('');\n    var chunkArr = chunk.toUpperCase().split('');\n\n    for (var i = 0; i < fullArr.length; i++) {\n        if (chunkArr[0] === fullArr[i]) {\n            if (fullArr.lenght - i < chunkArr.length) {\n                return false;\n            }\n            if (checkMatch(i)) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction checkFilter(friend, target_zone) {\n    var half = target_zone.closest('.half');\n    var filter = half.querySelector('#filter');\n    if (filter.value !== '') {\n        if (!isMatching(friend.querySelector('#friend_name').innerHTML, filter.value)) {\n            friend.style.display = \"none\";\n        }\n    }\n}\n\nfunction moveFriend(friend_node) {\n    // не понимаю почему не видит определнне выше source и target \n    // даже если передать их как аргументы??\n    var source = document.querySelector('#source_zone');\n    var target = document.querySelector('#target_zone');\n\n    toggleFriendClass(friend_node);\n\n    if (friend_node.parentNode === source) {\n        checkFilter(friend_node, target);\n        target.appendChild(friend_node);\n    } else {\n        checkFilter(friend_node, source);\n        source.appendChild(friend_node);\n    }\n}\n\nfunction toggleFriendClass(friend_node) {\n    friend_node.classList.toggle('friend-right');\n    friend_node.classList.toggle('friend-left');\n}\n\nfunction makeDnD(z_source, z_target) {\n    var currentDrag = void 0;\n\n    //z_source.addEventListener('dragstart', (e) => {\n    document.addEventListener('dragstart', function (e) {\n        currentDrag = { 'source': z_source, 'node': e.target };\n    });\n\n    //z_source.addEventListener('dragover', (e) => {\n    document.addEventListener('dragover', function (e) {\n        e.preventDefault();\n    });\n\n    //z_target.addEventListener('drop', (e) => {\n    document.addEventListener('drop', function (e) {\n        if (currentDrag) {\n            e.preventDefault();\n\n            if (e.target === z_target || e.target.parentNode === z_target || e.target.parentNode.parentNode === z_target) {\n\n                toggleFriendClass(currentDrag.node);\n                checkFilter(currentDrag.node, z_target);\n\n                if (e.target !== z_target) {\n                    z_target.insertBefore(currentDrag.node, e.target.nextElementSibling);\n                } else {\n                    z_target.appendChild(currentDrag.node);\n                }\n\n                currentDrag = null;\n            }\n        }\n    });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbmRleC5qcz8zOWZlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0E7O0FBRUEsR0FBRztBQUVDO1dBQU87QUFEUjs7QUFLSCxTQUFTLE9BQ0w7ZUFBVyxRQUFRLFVBQUMsU0FBUyxRQUN6QjtXQUFHLEtBQUssTUFBTSxnQkFDVjtnQkFBRyxLQUFLLFNBQ0o7QUFDSDtBQUZELG1CQUdJO3VCQUFPLElBQUksTUFDZDtBQUNKO0FBQ0o7QUFDSixLQVRVOzs7QUFXWCxTQUFTLFFBQVEsUUFBUSxRQUNyQjtXQUFPLElBRVA7O2VBQVcsUUFBUSxVQUFDLFNBQVEsUUFDeEI7V0FBRyxJQUFJLFFBQVEsUUFBUyxnQkFDcEI7Z0JBQUcsS0FBSyxPQUNKO3VCQUFPLEtBQ1Y7QUFGRCxtQkFHSTt3QkFBUSxLQUNYO0FBQ0o7QUFDSjtBQUVKLEtBVlU7OztBQVlYLE9BQ0ssS0FBSyxZQUNIO0FBQ0E7V0FBTyxRQUFRLGVBQWUsRUFBQyxRQUNqQztBQUpMLEdBS0ssS0FBSyxtQkFDRjtBQUNBO1FBQUksQ0FBQyxhQUFhLGNBQWMsYUFBYSxlQUFlLElBQ3hEO3NCQUFjLFNBQVMsU0FBUyxjQUFjLDBCQUEwQixhQUN4RSxTQUFTLGNBRVQ7O3NCQUFjLEVBQUMsT0FBTSxNQUFLLFNBQVMsY0FBYywyQkFBMkIsYUFDNUUsU0FBUyxjQUNaO0FBTkQsV0FPSTswQkFBa0IsUUFDckI7QUFFRDs7UUFBSSxjQUFjLFNBQVMsY0FDM0I7UUFBSSxjQUFjLFNBQVMsY0FFM0I7O1lBQVEsYUFFWDtBQXRCTDs7QUF5QkEsSUFBTSxNQUFNLFNBQVMsY0FBYzs7QUFFbkMsU0FBUyxpQkFBaUIsU0FBUyxhQUMvQjtRQUFJLEVBQUUsT0FBTyxVQUFVLFNBQVMsV0FDNUI7WUFBSSxPQUFPLEVBQUUsT0FDYjtZQUFHLEVBQUUsVUFBVSxLQUFLLE9BQUssS0FBSyxRQUFNLE1BQzdCLEVBQUUsVUFBVSxLQUFLLE1BQUksS0FBSyxTQUFPLEtBQ2pD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QUN2QjtRQUFJLFNBQVMsS0FBSyxjQUNsQjtRQUFJLE9BQU8sVUFBVSxJQUNqQjtZQUFJLENBQUMsV0FBWSxPQUFPLGNBQWMsZ0JBQWdCLFdBQVcsT0FBTyxRQUNwRTttQkFBTyxNQUFNLFVBQ2hCO0FBQ0o7QUFDSjs7O0FBRUQsU0FBUyxXQUFXLGFBQ2hCO0FBQ0E7QUFDQTtRQUFJLFNBQVMsU0FBUyxjQUN0QjtRQUFJLFNBQVMsU0FBUyxjQUV0Qjs7c0JBRUE7O1FBQUcsWUFBWSxlQUFlLFFBQzFCO29CQUFZLGFBQ1o7ZUFBTyxZQUVWO0FBSkQsV0FLSTtvQkFBWSxhQUNaO2VBQU8sWUFDVjtBQUNKOzs7QUFFRCxTQUFTLGtCQUFrQixhQUN2QjtnQkFBWSxVQUFVLE9BQ3RCO2dCQUFZLFVBQVUsT0FDekI7OztBQUVELFNBQVMsUUFBUSxVQUFVLFVBQ3ZCO1FBRUE7O0FBQ0E7YUFBUyxpQkFBaUIsYUFBYyxhQUNwQztzQkFBYyxFQUFDLFVBQVUsVUFBVSxRQUFRLEVBQzlDO0FBRUQ7O0FBQ0E7YUFBUyxpQkFBaUIsWUFBYSxhQUNuQztVQUNIO0FBRUQ7O0FBQ0E7YUFBUyxpQkFBaUIsUUFBUyxhQUMvQjtZQUFHLGFBQ0M7Y0FFQTs7Z0JBQUcsRUFBRSxXQUFXLFlBQ1QsRUFBRSxPQUFPLGVBQWUsWUFDeEIsRUFBRSxPQUFPLFdBQVcsZUFBZSxVQUV0Qzs7a0NBQWtCLFlBQ2xCOzRCQUFZLFlBQVksTUFFeEI7O29CQUFHLEVBQUUsV0FBVyxVQUNaOzZCQUFTLGFBQWEsWUFBWSxNQUFNLEVBQUUsT0FFN0M7QUFIRCx1QkFJSTs2QkFBUyxZQUFZLFlBQ3hCO0FBRUQ7OzhCQUNIO0FBQ0o7QUFDSjtBQUVKIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLy/Qv9C+0LTQutC70Y7Rh9Cw0LXQvCDQvdCwINGB0YLRgNCw0L3QuNGG0YMgdmtcclxuXHJcblZLLmluaXQoe1xyXG4gICAvLyBhcGlJZDogNjc1OTk3NVxyXG4gICAgYXBpSWQ6IDY3NjAwMDlcclxufSk7XHJcblxyXG5cclxuZnVuY3Rpb24gQXV0aCgpe1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBWSy5BdXRoLmxvZ2luKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICBpZihkYXRhLnNlc3Npb24pe1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdGYWlsZWQgdG8gbG9naW4nKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gY2FsbEFQSShtZXRob2QsIHBhcmFtcyl7XHJcbiAgICBwYXJhbXMudiA9ICc1LjkyJztcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUscmVqZWN0KSA9PiB7XHJcbiAgICAgICAgVksuYXBpKG1ldGhvZCwgcGFyYW1zLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBpZihkYXRhLmVycm9yKXtcclxuICAgICAgICAgICAgICAgIHJlamVjdChkYXRhLmVycm9yKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhLnJlc3BvbnNlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG59XHJcblxyXG5BdXRoKClcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgIC8vIHJldHVybiBjYWxsQVBJKCd1c2Vycy5nZXQnLCB7fSlcclxuICAgICAgIHJldHVybiBjYWxsQVBJKCdmcmllbmRzLmdldCcsIHtmaWVsZHM6ICdwaG90b18xMDAnfSlcclxuICAgIH0pXHJcbiAgICAudGhlbihmcmllbmRzID0+IHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGxvY2FsU3RvcmFnZS5sZW5ndGgpO1xyXG4gICAgICAgIGlmICghbG9jYWxTdG9yYWdlLnRhcmdldERhdGEgfHwgbG9jYWxTdG9yYWdlLnRhcmdldERhdGEgPT09ICcnKXtcclxuICAgICAgICAgICAgcmVuZGVyRnJpZW5kcyhmcmllbmRzLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZnJpZW5kc190ZW1wbGF0ZV9sZWZ0JykudGV4dENvbnRlbnQsIFxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc291cmNlX2xpc3QnKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZW5kZXJGcmllbmRzKHtpdGVtczpbXX0sIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmcmllbmRzX3RlbXBsYXRlX3JpZ2h0JykudGV4dENvbnRlbnQsIFxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFyZ2V0X2xpc3QnKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVuZGVyRnJvbVN0b3JhZ2UoZnJpZW5kcy5pdGVtcyk7XHJcbiAgICAgICAgfSAgIFxyXG5cclxuICAgICAgICB2YXIgc291cmNlX3pvbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc291cmNlX3pvbmUnKTtcclxuICAgICAgICB2YXIgdGFyZ2V0X3pvbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFyZ2V0X3pvbmUnKTtcclxuICAgICAgICBcclxuICAgICAgICBtYWtlRG5EKHNvdXJjZV96b25lLCB0YXJnZXRfem9uZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgfSk7XHJcblxyXG5cclxuY29uc3QgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uJyk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZnJpZW5kJykpe1xyXG4gICAgICAgIHZhciByZWN0ID0gZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgaWYoZS5jbGllbnRYID4gcmVjdC5sZWZ0K3JlY3Qud2lkdGgtMTUgXHJcbiAgICAgICAgICAgICYmIGUuY2xpZW50WSA+IHJlY3QudG9wK3JlY3QuaGVpZ2h0LzMgXHJcbiAgICAgICAgICAgICYmIGUuY2xpZW50WSA8IHJlY3QudG9wKzIqcmVjdC5oZWlnaHQvMyl7XHJcbiAgICAgICAgICAgIG1vdmVGcmllbmQoZS50YXJnZXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSlcclxuXHJcbmJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHJcbiAgICBpZihsb2NhbFN0b3JhZ2UudGFyZ2V0RGF0YSl7XHJcbiAgICBsb2NhbFN0b3JhZ2UudGFyZ2V0RGF0YSA9ICcnO1xyXG4gICAgLy9jb25zb2xlLmxvZyhsb2NhbFN0b3JhZ2UubGVuZ3RoKSAgICBcclxuICAgIH1cclxuICAgIFxyXG4gICAgbGV0IHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YXJnZXRfem9uZScpOyAgICAgICBcclxuICAgIGxldCBzdHJpbmdEYXRhID0gW107XHJcbiAgICBmb3IgKHZhciBmcmllbmQgb2YgdGFyZ2V0LmNoaWxkcmVuKXsgICAgICAgICAgICBcclxuICAgICAgICBzdHJpbmdEYXRhLnB1c2goZnJpZW5kLmdldEF0dHJpYnV0ZSgnaWQnKSlcclxuICAgIH0gICAgXHJcbiAgICBsb2NhbFN0b3JhZ2UudGFyZ2V0RGF0YSA9IHN0cmluZ0RhdGE7ICAgICAgICAgICAgXHJcbn0pXHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChlKSA9PiB7IFxyXG4gICAgaWYoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbnB1dCcpKXtcclxuICAgICAgICBsZXQgaGFsZiA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5oYWxmJyk7IFxyXG4gICAgICAgIGlmICghZS50YXJnZXQudmFsdWUpIHtcclxuICAgICAgICAgICAgbm9GaWx0ZXIgKGhhbGYucXVlcnlTZWxlY3RvcignLmZyaWVuZHMtbGlzdCcpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkcmVzc0NvZGUoZS50YXJnZXQudmFsdWUsIGhhbGYucXVlcnlTZWxlY3RvcignLmZyaWVuZHMtbGlzdCcpKTtcclxuICAgIH1cclxufSlcclxuXHJcbmZ1bmN0aW9uIHJlbmRlckZyb21TdG9yYWdlKHZrX2l0ZW1zKXtcclxuICAgIHZhciBzdG9yYWdlX2xpc3QgPSBsb2FkU3RvcmFnZSgpO1xyXG4gICAgdmFyIHJpZ2h0X2ZyaWVuZHM9e2l0ZW1zOltdfTtcclxuICAgIHZhciBsZWZ0X2ZyaWVuZHMgPSB7aXRlbXM6W119O1xyXG4gICAgdmFyIGkgPSAwO1xyXG5cclxuICAgIGZvcih2YXIgaXRlbSBvZiB2a19pdGVtcyl7XHJcbiAgICAgICAgaWYgKGkgPCBzdG9yYWdlX2xpc3QubGVuZ3RoKXsgXHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coaXRlbS5pZCkgIFxyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGl0ZW0ubGFzdF9uYW1lKSAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKGl0ZW0uaWQgPT09IHN0b3JhZ2VfbGlzdFtpXSl7XHJcbiAgICAgICAgICAgICAgICByaWdodF9mcmllbmRzLml0ZW1zLnB1c2goaXRlbSkgIFxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codmtfaXRlbXMubGVuZ3RoKSAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpKys7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGVmdF9mcmllbmRzLml0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgeyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZWZ0X2ZyaWVuZHMuaXRlbXMucHVzaChpdGVtKTtcclxuICAgICAgICB9ICAgICAgICBcclxuICAgIH0gXHJcblxyXG4gICAgY29uc29sZS5sb2cocmlnaHRfZnJpZW5kcylcclxuICAgIHJlbmRlckZyaWVuZHMobGVmdF9mcmllbmRzLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZnJpZW5kc190ZW1wbGF0ZV9sZWZ0JykudGV4dENvbnRlbnQsIFxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NvdXJjZV9saXN0JykpO1xyXG4gICAgXHJcbiAgICByZW5kZXJGcmllbmRzKHJpZ2h0X2ZyaWVuZHMsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmcmllbmRzX3RlbXBsYXRlX3JpZ2h0JykudGV4dENvbnRlbnQsIFxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RhcmdldF9saXN0JykpIFxyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJGcmllbmRzKGZyaWVuZHMsIHRlbXBsYXRlLCBwYXJlbnQpIHtcclxuICAgIGNvbnN0IHJlbmRlciA9IEhhbmRsZWJhcnMuY29tcGlsZSh0ZW1wbGF0ZSk7XHJcbiAgICBjb25zdCBodG1sID0gcmVuZGVyKGZyaWVuZHMpO1xyXG4gICAgcGFyZW50LmlubmVySFRNTCA9IGh0bWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRTdG9yYWdlKCl7XHJcbiAgICBpZihsb2NhbFN0b3JhZ2UudGFyZ2V0RGF0YSAmJiBsb2NhbFN0b3JhZ2UudGFyZ2V0RGF0YSAhPT0gJycpe1xyXG4gICAgICAgIHZhciBpZF9saXN0ID0gW107IFxyXG4gICAgICAgIGZvciAodmFyIGVsZW0gb2YgbG9jYWxTdG9yYWdlLnRhcmdldERhdGEuc3BsaXQoJywnKSl7XHJcbiAgICAgICAgICAgIGlkX2xpc3QucHVzaChwYXJzZUludChlbGVtKSk7XHJcbiAgICAgICAgfSAgICAgICAgICAgICAgXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhpZF9saXN0KVxyXG4gICAgICAgIHJldHVybiBpZF9saXN0LnNvcnQoZnVuY3Rpb24oYSwgYil7cmV0dXJuIGEgLSBifSk7ICBcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbm9GaWx0ZXIgKGZyaWVuZHMpe1xyXG4gICAgaWYgKGZyaWVuZHMuaW5uZXJIVE1MKXsgICAgICAgIFxyXG4gICAgICAgIGZvcihsZXQgZnJpZW5kIG9mIGZyaWVuZHMuY2hpbGRyZW4pe1xyXG4gICAgICAgICAgICBmcmllbmQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4gICAgICAgICAgICBcclxuZnVuY3Rpb24gZHJlc3NDb2RlIChjaHVuaywgZnJpZW5kcykgeyAgICBcclxuICAgIGlmIChmcmllbmRzLmlubmVySFRNTCl7ICAgICAgICBcclxuICAgICAgICBmb3IobGV0IGZyaWVuZCBvZiBmcmllbmRzLmNoaWxkcmVuKXtcclxuICAgICAgICAgICAgaWYgKGlzTWF0Y2hpbmcgKGZyaWVuZC5xdWVyeVNlbGVjdG9yKCcjZnJpZW5kX25hbWUnKS5pbm5lckhUTUwsIGNodW5rKSkgeyBcclxuICAgICAgICAgICAgICAgIGZyaWVuZC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmcmllbmQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICB9ICAgXHJcbiAgICAgICAgfSAgICAgICAgICAgICAgXHJcbiAgICB9ICAgIFxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaXNNYXRjaGluZyAoZnVsbCwgY2h1bmspIHsgIFxyXG4gICAgZnVuY3Rpb24gY2hlY2tNYXRjaCAoaW5kZXgpIHtcclxuICAgICAgICBmb3IgKHZhciBjaGFyIG9mIGNodW5rQXJyKSB7XHJcbiAgICAgICAgICAgIGlmIChmdWxsQXJyW2luZGV4XSAhPT0gY2hhcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBmdWxsQXJyID0gZnVsbC50b1VwcGVyQ2FzZSgpLnNwbGl0KCcnKTtcclxuICAgIHZhciBjaHVua0FyciA9IGNodW5rLnRvVXBwZXJDYXNlKCkuc3BsaXQoJycpO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpPCBmdWxsQXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGNodW5rQXJyWzBdID09PSBmdWxsQXJyW2ldKSB7XHJcbiAgICAgICAgICAgIGlmIChmdWxsQXJyLmxlbmdodCAtIGkgPCBjaHVua0Fyci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2hlY2tNYXRjaChpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlOyAgXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrRmlsdGVyKGZyaWVuZCwgdGFyZ2V0X3pvbmUpe1xyXG4gICAgbGV0IGhhbGYgPSB0YXJnZXRfem9uZS5jbG9zZXN0KCcuaGFsZicpOyBcclxuICAgIGxldCBmaWx0ZXIgPSBoYWxmLnF1ZXJ5U2VsZWN0b3IoJyNmaWx0ZXInKTtcclxuICAgIGlmIChmaWx0ZXIudmFsdWUgIT09ICcnKXtcclxuICAgICAgICBpZiAoIWlzTWF0Y2hpbmcgKGZyaWVuZC5xdWVyeVNlbGVjdG9yKCcjZnJpZW5kX25hbWUnKS5pbm5lckhUTUwsIGZpbHRlci52YWx1ZSkpIHtcclxuICAgICAgICAgICAgZnJpZW5kLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1vdmVGcmllbmQoZnJpZW5kX25vZGUpe1xyXG4gICAgLy8g0L3QtSDQv9C+0L3QuNC80LDRjiDQv9C+0YfQtdC80YMg0L3QtSDQstC40LTQuNGCINC+0L/RgNC10LTQtdC70L3QvdC1INCy0YvRiNC1IHNvdXJjZSDQuCB0YXJnZXQgXHJcbiAgICAvLyDQtNCw0LbQtSDQtdGB0LvQuCDQv9C10YDQtdC00LDRgtGMINC40YUg0LrQsNC6INCw0YDQs9GD0LzQtdC90YLRiz8/XHJcbiAgICBsZXQgc291cmNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NvdXJjZV96b25lJyk7XHJcbiAgICBsZXQgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RhcmdldF96b25lJyk7XHJcblxyXG4gICAgdG9nZ2xlRnJpZW5kQ2xhc3MoZnJpZW5kX25vZGUpO1xyXG5cclxuICAgIGlmKGZyaWVuZF9ub2RlLnBhcmVudE5vZGUgPT09IHNvdXJjZSl7XHJcbiAgICAgICAgY2hlY2tGaWx0ZXIoZnJpZW5kX25vZGUsIHRhcmdldCk7XHJcbiAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGZyaWVuZF9ub2RlKTtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNoZWNrRmlsdGVyKGZyaWVuZF9ub2RlLCBzb3VyY2UpO1xyXG4gICAgICAgIHNvdXJjZS5hcHBlbmRDaGlsZChmcmllbmRfbm9kZSlcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlRnJpZW5kQ2xhc3MoZnJpZW5kX25vZGUpe1xyXG4gICAgZnJpZW5kX25vZGUuY2xhc3NMaXN0LnRvZ2dsZSgnZnJpZW5kLXJpZ2h0Jyk7XHJcbiAgICBmcmllbmRfbm9kZS5jbGFzc0xpc3QudG9nZ2xlKCdmcmllbmQtbGVmdCcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlRG5EKHpfc291cmNlLCB6X3RhcmdldCl7XHJcbiAgICBsZXQgY3VycmVudERyYWc7XHJcbiAgICBcclxuICAgIC8vel9zb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgKGUpID0+IHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIChlKSA9PiB7XHJcbiAgICAgICAgY3VycmVudERyYWcgPSB7J3NvdXJjZSc6IHpfc291cmNlLCAnbm9kZSc6IGUudGFyZ2V0fTtcclxuICAgIH0pXHJcblxyXG4gICAgLy96X3NvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChlKSA9PiB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChlKSA9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSlcclxuXHJcbiAgICAvL3pfdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCAoZSkgPT4ge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIChlKSA9PiB7XHJcbiAgICAgICAgaWYoY3VycmVudERyYWcpe1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IFxyXG5cclxuICAgICAgICAgICAgaWYoZS50YXJnZXQgPT09IHpfdGFyZ2V0IFxyXG4gICAgICAgICAgICAgICAgfHwgZS50YXJnZXQucGFyZW50Tm9kZSA9PT0gel90YXJnZXQgXHJcbiAgICAgICAgICAgICAgICB8fCBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUgPT09IHpfdGFyZ2V0KXsgICAgICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIHRvZ2dsZUZyaWVuZENsYXNzKGN1cnJlbnREcmFnLm5vZGUpXHJcbiAgICAgICAgICAgICAgICBjaGVja0ZpbHRlcihjdXJyZW50RHJhZy5ub2RlLCB6X3RhcmdldCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoZS50YXJnZXQgIT09IHpfdGFyZ2V0KXtcclxuICAgICAgICAgICAgICAgICAgICB6X3RhcmdldC5pbnNlcnRCZWZvcmUoY3VycmVudERyYWcubm9kZSwgZS50YXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgel90YXJnZXQuYXBwZW5kQ2hpbGQoY3VycmVudERyYWcubm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGN1cnJlbnREcmFnID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NjcmlwdHMvaW5kZXguanMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")}]);
!function(n){function t(I){if(g[I])return g[I].exports;var e=g[I]={i:I,l:!1,exports:{}};return n[I].call(e.exports,e,e.exports,t),e.l=!0,e.exports}var g={};t.m=n,t.c=g,t.d=function(n,g,I){t.o(n,g)||Object.defineProperty(n,g,{configurable:!1,enumerable:!0,get:I})},t.n=function(n){var g=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(g,"a",g),g},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\n\n//подключаем на страницу vk\n\nVK.init({\n    // apiId: 6759975\n    apiId: 6760009\n});\n\nfunction Auth() {\n    return new Promise(function (resolve) {\n        VK.Auth.login(function (data) {\n            if (data.session) {\n                resolve(true);\n            } else {\n                //reject(new Error('Failed to login'));\n                resolve(false);\n            }\n        });\n    });\n}\n\nfunction callAPI(method, params) {\n    params.v = '5.92';\n\n    return new Promise(function (resolve, reject) {\n        VK.api(method, params, function (data) {\n            if (data.error) {\n                reject(data.error);\n            } else {\n                resolve(data.response);\n            }\n        });\n    });\n}\n\nfunction mockOn() {\n    console.error('failed to login, the data will be load from local file');\n    loadJSON(function (response) {\n        // Parse JSON string into object\n        return JSON.parse(response);\n    });\n}\n\nfunction loadJSON(callback) {\n\n    var xobj = new XMLHttpRequest();\n    xobj.overrideMimeType(\"application/json\");\n    xobj.open('GET', '../data/friends_list.json', true);\n    xobj.onreadystatechange = function () {\n        if (xobj.readyState == 4 && xobj.status == \"200\") {\n            // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode\n            callback(xobj.responseText);\n        }\n    };\n    xobj.send(null);\n}\n\nAuth().then(function (answer) {\n    console.log(answer);\n    if (answer) {\n        // return callAPI('users.get', {})    \n        return callAPI('friends.get', { fields: 'photo_100' });\n    } else {\n        new Error('Failed to login');\n        return mockOn();\n    }\n}).then(function (friends) {\n    if (!localStorage.targetData || localStorage.targetData === '') {\n        //console.log(friends)\n        renderFriends(friends, document.querySelector('#friends_template_left').textContent, document.querySelector('#source_list'));\n\n        renderFriends({ items: [] }, document.querySelector('#friends_template_right').textContent, document.querySelector('#target_list'));\n    } else {\n        renderFromStorage(friends.items);\n    }\n\n    var source_zone = document.querySelector('#source_zone');\n    var target_zone = document.querySelector('#target_zone');\n\n    makeDnD(source_zone, target_zone);\n});\n\nvar btn = document.querySelector('button');\n\ndocument.addEventListener('click', function (e) {\n    if (e.target.classList.contains('friend')) {\n        var rect = e.target.getBoundingClientRect();\n        if (e.clientX > rect.left + rect.width - 15 && e.clientY > rect.top + rect.height / 3 && e.clientY < rect.top + 2 * rect.height / 3) {\n            moveFriend(e.target);\n        }\n    }\n});\n\nbtn.addEventListener('click', function () {\n\n    if (localStorage.targetData) {\n        localStorage.targetData = '';\n    }\n\n    var target = document.querySelector('#target_zone');\n    var stringData = [];\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n        for (var _iterator = target.children[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var friend = _step.value;\n\n            stringData.push(friend.getAttribute('id'));\n        }\n    } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n            }\n        } finally {\n            if (_didIteratorError) {\n                throw _iteratorError;\n            }\n        }\n    }\n\n    localStorage.targetData = stringData;\n});\n\ndocument.addEventListener('keyup', function (e) {\n    if (e.target.classList.contains('input')) {\n        var half = e.target.closest('.half');\n        if (!e.target.value) {\n            noFilter(half.querySelector('.friends-list'));\n            return;\n        }\n        dressCode(e.target.value, half.querySelector('.friends-list'));\n    }\n});\n\nfunction renderFromStorage(vk_items) {\n    var storage_list = loadStorage();\n    var right_friends = { items: [] };\n    var left_friends = { items: [] };\n    var i = 0;\n\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n        for (var _iterator2 = vk_items[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var item = _step2.value;\n\n            if (i < storage_list.length) {\n                if (item.id === storage_list[i]) {\n                    right_friends.items.push(item);\n                    console.log(vk_items.length);\n                    i++;\n                } else {\n                    left_friends.items.push(item);\n                }\n            } else {\n                left_friends.items.push(item);\n            }\n        }\n    } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                _iterator2.return();\n            }\n        } finally {\n            if (_didIteratorError2) {\n                throw _iteratorError2;\n            }\n        }\n    }\n\n    renderFriends(left_friends, document.querySelector('#friends_template_left').textContent, document.querySelector('#source_list'));\n\n    renderFriends(right_friends, document.querySelector('#friends_template_right').textContent, document.querySelector('#target_list'));\n}\n\nfunction renderFriends(friends, template, parent) {\n    var render = Handlebars.compile(template);\n    var html = render(friends);\n    parent.innerHTML = html;\n}\n\nfunction loadStorage() {\n    if (localStorage.targetData && localStorage.targetData !== '') {\n        var id_list = [];\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n            for (var _iterator3 = localStorage.targetData.split(',')[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                var elem = _step3.value;\n\n                id_list.push(parseInt(elem));\n            }\n            //console.log(id_list)        \n        } catch (err) {\n            _didIteratorError3 = true;\n            _iteratorError3 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                    _iterator3.return();\n                }\n            } finally {\n                if (_didIteratorError3) {\n                    throw _iteratorError3;\n                }\n            }\n        }\n\n        return id_list.sort(function (a, b) {\n            return a - b;\n        });\n    }\n}\n\nfunction noFilter(friends) {\n    if (friends.innerHTML) {\n        var _iteratorNormalCompletion4 = true;\n        var _didIteratorError4 = false;\n        var _iteratorError4 = undefined;\n\n        try {\n            for (var _iterator4 = friends.children[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                var friend = _step4.value;\n\n                friend.style.display = \"flex\";\n            }\n        } catch (err) {\n            _didIteratorError4 = true;\n            _iteratorError4 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion4 && _iterator4.return) {\n                    _iterator4.return();\n                }\n            } finally {\n                if (_didIteratorError4) {\n                    throw _iteratorError4;\n                }\n            }\n        }\n    }\n}\n\nfunction dressCode(chunk, friends) {\n    if (friends.innerHTML) {\n        var _iteratorNormalCompletion5 = true;\n        var _didIteratorError5 = false;\n        var _iteratorError5 = undefined;\n\n        try {\n            for (var _iterator5 = friends.children[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n                var friend = _step5.value;\n\n                if (isMatching(friend.querySelector('#friend_name').innerHTML, chunk)) {\n                    friend.style.display = \"flex\";\n                } else {\n                    friend.style.display = \"none\";\n                }\n            }\n        } catch (err) {\n            _didIteratorError5 = true;\n            _iteratorError5 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion5 && _iterator5.return) {\n                    _iterator5.return();\n                }\n            } finally {\n                if (_didIteratorError5) {\n                    throw _iteratorError5;\n                }\n            }\n        }\n    }\n}\n\nfunction isMatching(full, chunk) {\n    function checkMatch(index) {\n        var _iteratorNormalCompletion6 = true;\n        var _didIteratorError6 = false;\n        var _iteratorError6 = undefined;\n\n        try {\n            for (var _iterator6 = chunkArr[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n                var char = _step6.value;\n\n                if (fullArr[index] !== char) {\n                    return false;\n                }\n                index++;\n            }\n        } catch (err) {\n            _didIteratorError6 = true;\n            _iteratorError6 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion6 && _iterator6.return) {\n                    _iterator6.return();\n                }\n            } finally {\n                if (_didIteratorError6) {\n                    throw _iteratorError6;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    var fullArr = full.toUpperCase().split('');\n    var chunkArr = chunk.toUpperCase().split('');\n\n    for (var i = 0; i < fullArr.length; i++) {\n        if (chunkArr[0] === fullArr[i]) {\n            if (fullArr.lenght - i < chunkArr.length) {\n                return false;\n            }\n            if (checkMatch(i)) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction checkFilter(friend, target_zone) {\n    var half = target_zone.closest('.half');\n    var filter = half.querySelector('#filter');\n    if (filter.value !== '') {\n        if (!isMatching(friend.querySelector('#friend_name').innerHTML, filter.value)) {\n            friend.style.display = \"none\";\n        }\n    }\n}\n\nfunction moveFriend(friend_node) {\n    // не понимаю почему не видит определнне выше source и target \n    // даже если передать их как аргументы??\n    var source = document.querySelector('#source_zone');\n    var target = document.querySelector('#target_zone');\n\n    toggleFriendClass(friend_node);\n\n    if (friend_node.parentNode === source) {\n        checkFilter(friend_node, target);\n        target.appendChild(friend_node);\n    } else {\n        checkFilter(friend_node, source);\n        source.appendChild(friend_node);\n    }\n}\n\nfunction toggleFriendClass(friend_node) {\n    friend_node.classList.toggle('friend-right');\n    friend_node.classList.toggle('friend-left');\n}\n\nfunction makeDnD(z_source, z_target) {\n    var currentDrag = void 0;\n\n    //z_source.addEventListener('dragstart', (e) => {\n    document.addEventListener('dragstart', function (e) {\n        currentDrag = { 'source': z_source, 'node': e.target };\n    });\n\n    //z_source.addEventListener('dragover', (e) => {\n    document.addEventListener('dragover', function (e) {\n        e.preventDefault();\n    });\n\n    //z_target.addEventListener('drop', (e) => {\n    document.addEventListener('drop', function (e) {\n        if (currentDrag) {\n            e.preventDefault();\n\n            if (e.target === z_target || e.target.parentNode === z_target || e.target.parentNode.parentNode === z_target) {\n\n                toggleFriendClass(currentDrag.node);\n                checkFilter(currentDrag.node, z_target);\n\n                if (e.target !== z_target) {\n                    z_target.insertBefore(currentDrag.node, e.target.nextElementSibling);\n                } else {\n                    z_target.appendChild(currentDrag.node);\n                }\n\n                currentDrag = null;\n            }\n        }\n    });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbmRleC5qcz8zOWZlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0E7O0FBRUEsR0FBRztBQUVDO1dBQU87QUFEUjs7QUFLSCxTQUFTLE9BQ0w7ZUFBVyxRQUFTLG1CQUNoQjtXQUFHLEtBQUssTUFBTSxnQkFDVjtnQkFBRyxLQUFLLFNBQ0o7d0JBQ0g7QUFGRCxtQkFHSTtBQUNBO3dCQUNIO0FBQ0o7QUFDSjtBQUNKLEtBVlU7OztBQVlYLFNBQVMsUUFBUSxRQUFRLFFBQ3JCO1dBQU8sSUFFUDs7ZUFBVyxRQUFRLFVBQUMsU0FBUSxRQUN4QjtXQUFHLElBQUksUUFBUSxRQUFTLGdCQUNwQjtnQkFBRyxLQUFLLE9BQ0o7dUJBQU8sS0FDVjtBQUZELG1CQUdJO3dCQUFRLEtBQ1g7QUFDSjtBQUNKO0FBRUosS0FWVTs7O0FBWVgsU0FBUyxTQUNMO1lBQVEsTUFDUjthQUFTLFVBQVMsVUFDZDtBQUNFO2VBQU8sS0FBSyxNQUNkO0FBQ1A7OztBQUVELFNBQVMsU0FBUyxVQUVkOztRQUFJLE9BQU8sSUFDUDtTQUFLLGlCQUNUO1NBQUssS0FBSyxPQUFPLDZCQUNqQjtTQUFLLHFCQUFxQixZQUNsQjtZQUFJLEtBQUssY0FBYyxLQUFLLEtBQUssVUFBVSxPQUMzQztBQUNBO3FCQUFTLEtBQ1I7QUFDUjtBQUNEO1NBQUssS0FDSjs7O0FBSUwsT0FDSyxLQUFNLGtCQUNIO1lBQVEsSUFDUjtRQUFJLFFBQ0w7QUFDSztlQUFPLFFBQVEsZUFBZSxFQUFDLFFBQ2xDO0FBSEQsV0FJSTtZQUFJLE1BQ0o7ZUFDSDtBQUNKO0FBVkwsR0FXSyxLQUFLLG1CQUNGO1FBQUksQ0FBQyxhQUFhLGNBQWMsYUFBYSxlQUFlLElBQ3hEO0FBQ0E7c0JBQWMsU0FBUyxTQUFTLGNBQWMsMEJBQTBCLGFBQ3hFLFNBQVMsY0FFVDs7c0JBQWMsRUFBQyxPQUFNLE1BQUssU0FBUyxjQUFjLDJCQUEyQixhQUM1RSxTQUFTLGNBQ1o7QUFQRCxX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QVksTUFBTSxFQUFFLE9BRTdDO0FBSEQsdUJBSUk7NkJBQVMsWUFBWSxZQUN4QjtBQUVEOzs4QkFDSDtBQUNKO0FBQ0o7QUFFSiIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi8v0L/QvtC00LrQu9GO0YfQsNC10Lwg0L3QsCDRgdGC0YDQsNC90LjRhtGDIHZrXHJcblxyXG5WSy5pbml0KHtcclxuICAgLy8gYXBpSWQ6IDY3NTk5NzVcclxuICAgIGFwaUlkOiA2NzYwMDA5XHJcbn0pO1xyXG5cclxuXHJcbmZ1bmN0aW9uIEF1dGgoKXtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIFZLLkF1dGgubG9naW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGlmKGRhdGEuc2Vzc2lvbil7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL3JlamVjdChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2dpbicpKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbGxBUEkobWV0aG9kLCBwYXJhbXMpe1xyXG4gICAgcGFyYW1zLnYgPSAnNS45Mic7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCkgPT4ge1xyXG4gICAgICAgIFZLLmFwaShtZXRob2QsIHBhcmFtcywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgaWYoZGF0YS5lcnJvcil7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZGF0YS5lcnJvcilcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YS5yZXNwb25zZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gbW9ja09uKCkge1xyXG4gICAgY29uc29sZS5lcnJvcignZmFpbGVkIHRvIGxvZ2luLCB0aGUgZGF0YSB3aWxsIGJlIGxvYWQgZnJvbSBsb2NhbCBmaWxlJyk7XHJcbiAgICBsb2FkSlNPTihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIC8vIFBhcnNlIEpTT04gc3RyaW5nIGludG8gb2JqZWN0XHJcbiAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShyZXNwb25zZSk7XHJcbiAgICAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZEpTT04oY2FsbGJhY2spIHsgXHJcbiAgICBcclxuICAgIHZhciB4b2JqID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgeG9iai5vdmVycmlkZU1pbWVUeXBlKFwiYXBwbGljYXRpb24vanNvblwiKTtcclxuICAgIHhvYmoub3BlbignR0VUJywgJy4uL2RhdGEvZnJpZW5kc19saXN0Lmpzb24nLCB0cnVlKTsgXHJcbiAgICB4b2JqLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHhvYmoucmVhZHlTdGF0ZSA9PSA0ICYmIHhvYmouc3RhdHVzID09IFwiMjAwXCIpIHtcclxuICAgICAgICAgICAgLy8gUmVxdWlyZWQgdXNlIG9mIGFuIGFub255bW91cyBjYWxsYmFjayBhcyAub3BlbiB3aWxsIE5PVCByZXR1cm4gYSB2YWx1ZSBidXQgc2ltcGx5IHJldHVybnMgdW5kZWZpbmVkIGluIGFzeW5jaHJvbm91cyBtb2RlXHJcbiAgICAgICAgICAgIGNhbGxiYWNrKHhvYmoucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHhvYmouc2VuZChudWxsKTsgIFxyXG4gICAgfVxyXG5cclxuXHJcblxyXG5BdXRoKClcclxuICAgIC50aGVuKChhbnN3ZXIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhhbnN3ZXIpXHJcbiAgICAgICAgaWYgKGFuc3dlcil7XHJcbiAgICAgICAvLyByZXR1cm4gY2FsbEFQSSgndXNlcnMuZ2V0Jywge30pICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gY2FsbEFQSSgnZnJpZW5kcy5nZXQnLCB7ZmllbGRzOiAncGhvdG9fMTAwJ30pXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIG5ldyBFcnJvcignRmFpbGVkIHRvIGxvZ2luJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBtb2NrT24oKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oZnJpZW5kcyA9PiB7XHJcbiAgICAgICAgaWYgKCFsb2NhbFN0b3JhZ2UudGFyZ2V0RGF0YSB8fCBsb2NhbFN0b3JhZ2UudGFyZ2V0RGF0YSA9PT0gJycpe1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGZyaWVuZHMpXHJcbiAgICAgICAgICAgIHJlbmRlckZyaWVuZHMoZnJpZW5kcywgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZyaWVuZHNfdGVtcGxhdGVfbGVmdCcpLnRleHRDb250ZW50LCBcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NvdXJjZV9saXN0JykpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmVuZGVyRnJpZW5kcyh7aXRlbXM6W119LCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZnJpZW5kc190ZW1wbGF0ZV9yaWdodCcpLnRleHRDb250ZW50LCBcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RhcmdldF9saXN0JykpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlbmRlckZyb21TdG9yYWdlKGZyaWVuZHMuaXRlbXMpO1xyXG4gICAgICAgIH0gICBcclxuXHJcbiAgICAgICAgdmFyIHNvdXJjZV96b25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NvdXJjZV96b25lJyk7XHJcbiAgICAgICAgdmFyIHRhcmdldF96b25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RhcmdldF96b25lJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWFrZURuRChzb3VyY2Vfem9uZSwgdGFyZ2V0X3pvbmUpO1xyXG4gICAgICAgICAgICBcclxuICAgIH0pO1xyXG5cclxuXHJcbmNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZyaWVuZCcpKXtcclxuICAgICAgICB2YXIgcmVjdCA9IGUudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGlmKGUuY2xpZW50WCA+IHJlY3QubGVmdCtyZWN0LndpZHRoLTE1IFxyXG4gICAgICAgICAgICAmJiBlLmNsaWVudFkgPiByZWN0LnRvcCtyZWN0LmhlaWdodC8zIFxyXG4gICAgICAgICAgICAmJiBlLmNsaWVudFkgPCByZWN0LnRvcCsyKnJlY3QuaGVpZ2h0LzMpe1xyXG4gICAgICAgICAgICBtb3ZlRnJpZW5kKGUudGFyZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pXHJcblxyXG5idG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblxyXG4gICAgaWYobG9jYWxTdG9yYWdlLnRhcmdldERhdGEpe1xyXG4gICAgbG9jYWxTdG9yYWdlLnRhcmdldERhdGEgPSAnJzsgICAgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGxldCB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFyZ2V0X3pvbmUnKTsgICAgICAgXHJcbiAgICBsZXQgc3RyaW5nRGF0YSA9IFtdO1xyXG4gICAgZm9yICh2YXIgZnJpZW5kIG9mIHRhcmdldC5jaGlsZHJlbil7ICAgICAgICAgICAgXHJcbiAgICAgICAgc3RyaW5nRGF0YS5wdXNoKGZyaWVuZC5nZXRBdHRyaWJ1dGUoJ2lkJykpXHJcbiAgICB9ICAgIFxyXG4gICAgbG9jYWxTdG9yYWdlLnRhcmdldERhdGEgPSBzdHJpbmdEYXRhOyAgICAgICAgICAgIFxyXG59KVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZSkgPT4geyBcclxuICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW5wdXQnKSl7XHJcbiAgICAgICAgbGV0IGhhbGYgPSBlLnRhcmdldC5jbG9zZXN0KCcuaGFsZicpOyBcclxuICAgICAgICBpZiAoIWUudGFyZ2V0LnZhbHVlKSB7XHJcbiAgICAgICAgICAgIG5vRmlsdGVyIChoYWxmLnF1ZXJ5U2VsZWN0b3IoJy5mcmllbmRzLWxpc3QnKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZHJlc3NDb2RlKGUudGFyZ2V0LnZhbHVlLCBoYWxmLnF1ZXJ5U2VsZWN0b3IoJy5mcmllbmRzLWxpc3QnKSk7XHJcbiAgICB9XHJcbn0pXHJcblxyXG5mdW5jdGlvbiByZW5kZXJGcm9tU3RvcmFnZSh2a19pdGVtcyl7XHJcbiAgICB2YXIgc3RvcmFnZV9saXN0ID0gbG9hZFN0b3JhZ2UoKTtcclxuICAgIHZhciByaWdodF9mcmllbmRzPXtpdGVtczpbXX07XHJcbiAgICB2YXIgbGVmdF9mcmllbmRzID0ge2l0ZW1zOltdfTtcclxuICAgIHZhciBpID0gMDtcclxuXHJcbiAgICBmb3IodmFyIGl0ZW0gb2YgdmtfaXRlbXMpe1xyXG4gICAgICAgIGlmIChpIDwgc3RvcmFnZV9saXN0Lmxlbmd0aCl7ICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoaXRlbS5pZCA9PT0gc3RvcmFnZV9saXN0W2ldKXtcclxuICAgICAgICAgICAgICAgIHJpZ2h0X2ZyaWVuZHMuaXRlbXMucHVzaChpdGVtKSAgXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2a19pdGVtcy5sZW5ndGgpICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGkrKzsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZWZ0X2ZyaWVuZHMuaXRlbXMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxlZnRfZnJpZW5kcy5pdGVtcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgIH0gICAgICBcclxuICAgICAgICBcclxuICAgIH0gXHJcblxyXG4gICAgcmVuZGVyRnJpZW5kcyhsZWZ0X2ZyaWVuZHMsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmcmllbmRzX3RlbXBsYXRlX2xlZnQnKS50ZXh0Q29udGVudCwgXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc291cmNlX2xpc3QnKSk7XHJcbiAgICAgICAgXHJcbiAgICByZW5kZXJGcmllbmRzKHJpZ2h0X2ZyaWVuZHMsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmcmllbmRzX3RlbXBsYXRlX3JpZ2h0JykudGV4dENvbnRlbnQsIFxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RhcmdldF9saXN0JykpIFxyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJGcmllbmRzKGZyaWVuZHMsIHRlbXBsYXRlLCBwYXJlbnQpIHtcclxuICAgIGNvbnN0IHJlbmRlciA9IEhhbmRsZWJhcnMuY29tcGlsZSh0ZW1wbGF0ZSk7XHJcbiAgICBjb25zdCBodG1sID0gcmVuZGVyKGZyaWVuZHMpO1xyXG4gICAgcGFyZW50LmlubmVySFRNTCA9IGh0bWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRTdG9yYWdlKCl7XHJcbiAgICBpZihsb2NhbFN0b3JhZ2UudGFyZ2V0RGF0YSAmJiBsb2NhbFN0b3JhZ2UudGFyZ2V0RGF0YSAhPT0gJycpe1xyXG4gICAgICAgIHZhciBpZF9saXN0ID0gW107IFxyXG4gICAgICAgIGZvciAodmFyIGVsZW0gb2YgbG9jYWxTdG9yYWdlLnRhcmdldERhdGEuc3BsaXQoJywnKSl7XHJcbiAgICAgICAgICAgIGlkX2xpc3QucHVzaChwYXJzZUludChlbGVtKSk7XHJcbiAgICAgICAgfSAgICAgICAgICAgICAgXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhpZF9saXN0KSAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGlkX2xpc3Quc29ydChmdW5jdGlvbihhLCBiKXtyZXR1cm4gYSAtIGJ9KTsgIFxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBub0ZpbHRlciAoZnJpZW5kcyl7XHJcbiAgICBpZiAoZnJpZW5kcy5pbm5lckhUTUwpeyAgICAgICAgXHJcbiAgICAgICAgZm9yKGxldCBmcmllbmQgb2YgZnJpZW5kcy5jaGlsZHJlbil7XHJcbiAgICAgICAgICAgIGZyaWVuZC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiAgICAgICAgICAgIFxyXG5mdW5jdGlvbiBkcmVzc0NvZGUgKGNodW5rLCBmcmllbmRzKSB7ICAgIFxyXG4gICAgaWYgKGZyaWVuZHMuaW5uZXJIVE1MKXsgICAgICAgIFxyXG4gICAgICAgIGZvcihsZXQgZnJpZW5kIG9mIGZyaWVuZHMuY2hpbGRyZW4pe1xyXG4gICAgICAgICAgICBpZiAoaXNNYXRjaGluZyAoZnJpZW5kLnF1ZXJ5U2VsZWN0b3IoJyNmcmllbmRfbmFtZScpLmlubmVySFRNTCwgY2h1bmspKSB7IFxyXG4gICAgICAgICAgICAgICAgZnJpZW5kLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZyaWVuZC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgIH0gICBcclxuICAgICAgICB9ICAgICAgICAgICAgICBcclxuICAgIH0gICAgXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBpc01hdGNoaW5nIChmdWxsLCBjaHVuaykgeyAgXHJcbiAgICBmdW5jdGlvbiBjaGVja01hdGNoIChpbmRleCkge1xyXG4gICAgICAgIGZvciAodmFyIGNoYXIgb2YgY2h1bmtBcnIpIHtcclxuICAgICAgICAgICAgaWYgKGZ1bGxBcnJbaW5kZXhdICE9PSBjaGFyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGZ1bGxBcnIgPSBmdWxsLnRvVXBwZXJDYXNlKCkuc3BsaXQoJycpO1xyXG4gICAgdmFyIGNodW5rQXJyID0gY2h1bmsudG9VcHBlckNhc2UoKS5zcGxpdCgnJyk7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGk8IGZ1bGxBcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoY2h1bmtBcnJbMF0gPT09IGZ1bGxBcnJbaV0pIHtcclxuICAgICAgICAgICAgaWYgKGZ1bGxBcnIubGVuZ2h0IC0gaSA8IGNodW5rQXJyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjaGVja01hdGNoKGkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7ICBcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tGaWx0ZXIoZnJpZW5kLCB0YXJnZXRfem9uZSl7XHJcbiAgICBsZXQgaGFsZiA9IHRhcmdldF96b25lLmNsb3Nlc3QoJy5oYWxmJyk7IFxyXG4gICAgbGV0IGZpbHRlciA9IGhhbGYucXVlcnlTZWxlY3RvcignI2ZpbHRlcicpO1xyXG4gICAgaWYgKGZpbHRlci52YWx1ZSAhPT0gJycpe1xyXG4gICAgICAgIGlmICghaXNNYXRjaGluZyAoZnJpZW5kLnF1ZXJ5U2VsZWN0b3IoJyNmcmllbmRfbmFtZScpLmlubmVySFRNTCwgZmlsdGVyLnZhbHVlKSkge1xyXG4gICAgICAgICAgICBmcmllbmQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbW92ZUZyaWVuZChmcmllbmRfbm9kZSl7XHJcbiAgICAvLyDQvdC1INC/0L7QvdC40LzQsNGOINC/0L7Rh9C10LzRgyDQvdC1INCy0LjQtNC40YIg0L7Qv9GA0LXQtNC10LvQvdC90LUg0LLRi9GI0LUgc291cmNlINC4IHRhcmdldCBcclxuICAgIC8vINC00LDQttC1INC10YHQu9C4INC/0LXRgNC10LTQsNGC0Ywg0LjRhSDQutCw0Log0LDRgNCz0YPQvNC10L3RgtGLPz9cclxuICAgIGxldCBzb3VyY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc291cmNlX3pvbmUnKTtcclxuICAgIGxldCB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFyZ2V0X3pvbmUnKTtcclxuXHJcbiAgICB0b2dnbGVGcmllbmRDbGFzcyhmcmllbmRfbm9kZSk7XHJcblxyXG4gICAgaWYoZnJpZW5kX25vZGUucGFyZW50Tm9kZSA9PT0gc291cmNlKXtcclxuICAgICAgICBjaGVja0ZpbHRlcihmcmllbmRfbm9kZSwgdGFyZ2V0KTtcclxuICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZnJpZW5kX25vZGUpO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2hlY2tGaWx0ZXIoZnJpZW5kX25vZGUsIHNvdXJjZSk7XHJcbiAgICAgICAgc291cmNlLmFwcGVuZENoaWxkKGZyaWVuZF9ub2RlKVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVGcmllbmRDbGFzcyhmcmllbmRfbm9kZSl7XHJcbiAgICBmcmllbmRfbm9kZS5jbGFzc0xpc3QudG9nZ2xlKCdmcmllbmQtcmlnaHQnKTtcclxuICAgIGZyaWVuZF9ub2RlLmNsYXNzTGlzdC50b2dnbGUoJ2ZyaWVuZC1sZWZ0Jyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VEbkQoel9zb3VyY2UsIHpfdGFyZ2V0KXtcclxuICAgIGxldCBjdXJyZW50RHJhZztcclxuICAgIFxyXG4gICAgLy96X3NvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCAoZSkgPT4ge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgKGUpID0+IHtcclxuICAgICAgICBjdXJyZW50RHJhZyA9IHsnc291cmNlJzogel9zb3VyY2UsICdub2RlJzogZS50YXJnZXR9O1xyXG4gICAgfSlcclxuXHJcbiAgICAvL3pfc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGUpID0+IHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGUpID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KVxyXG5cclxuICAgIC8vel90YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIChlKSA9PiB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgKGUpID0+IHtcclxuICAgICAgICBpZihjdXJyZW50RHJhZyl7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgXHJcblxyXG4gICAgICAgICAgICBpZihlLnRhcmdldCA9PT0gel90YXJnZXQgXHJcbiAgICAgICAgICAgICAgICB8fCBlLnRhcmdldC5wYXJlbnROb2RlID09PSB6X3RhcmdldCBcclxuICAgICAgICAgICAgICAgIHx8IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZSA9PT0gel90YXJnZXQpeyAgICAgICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgdG9nZ2xlRnJpZW5kQ2xhc3MoY3VycmVudERyYWcubm9kZSlcclxuICAgICAgICAgICAgICAgIGNoZWNrRmlsdGVyKGN1cnJlbnREcmFnLm5vZGUsIHpfdGFyZ2V0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihlLnRhcmdldCAhPT0gel90YXJnZXQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHpfdGFyZ2V0Lmluc2VydEJlZm9yZShjdXJyZW50RHJhZy5ub2RlLCBlLnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB6X3RhcmdldC5hcHBlbmRDaGlsZChjdXJyZW50RHJhZy5ub2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY3VycmVudERyYWcgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc2NyaXB0cy9pbmRleC5qcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")}]);
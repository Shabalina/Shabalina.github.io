!function(n){function t(e){if(g[e])return g[e].exports;var r=g[e]={i:e,l:!1,exports:{}};return n[e].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var g={};t.m=n,t.c=g,t.d=function(n,g,e){t.o(n,g)||Object.defineProperty(n,g,{configurable:!1,enumerable:!0,get:e})},t.n=function(n){var g=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(g,"a",g),g},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\n\n//подключаем на страницу vk\n\nFB.init({\n    appId: 348724805944781,\n    status: true,\n    xfbml: true,\n    version: 'v2.7' // or v2.6, v2.5, v2.4, v2.3\n});\n\nfunction Auth() {\n    return new Promise(function (resolve, reject) {\n        FB.login(function (response) {\n            if (response.authResponse) {\n                resolve();\n            } else {\n                reject(new Error('Failed to login'));\n            }\n        });\n    });\n}\n\nfunction callAPI(method, params) {\n    //params.v = '5.92';\n\n    return new Promise(function (resolve, reject) {\n        FB.api(method, params, function (data) {\n            if (data.error) {\n                reject(data.error);\n            } else {\n                resolve(data.response);\n            }\n        });\n    });\n}\n\nAuth().then(function () {\n    // return callAPI('users.get', {})\n    return callAPI('/me/friends?fields=picture.width(400).height(400)', 'GET', {});\n}).then(function (friends) {\n    //console.log(localStorage.length);\n    if (!localStorage.targetData || localStorage.targetData === '') {\n        renderFriends(friends, document.querySelector('#friends_template_left').textContent, document.querySelector('#source_list'));\n\n        renderFriends({ items: [] }, document.querySelector('#friends_template_right').textContent, document.querySelector('#target_list'));\n    } else {\n        renderFromStorage(friends.items);\n    }\n\n    var source_zone = document.querySelector('#source_zone');\n    var target_zone = document.querySelector('#target_zone');\n\n    makeDnD(source_zone, target_zone);\n});\n\nvar btn = document.querySelector('button');\n\ndocument.addEventListener('click', function (e) {\n    if (e.target.classList.contains('friend')) {\n        var rect = e.target.getBoundingClientRect();\n        if (e.clientX > rect.left + rect.width - 15 && e.clientY > rect.top + rect.height / 3 && e.clientY < rect.top + 2 * rect.height / 3) {\n            moveFriend(e.target);\n        }\n    }\n});\n\nbtn.addEventListener('click', function () {\n\n    if (localStorage.targetData) {\n        localStorage.targetData = '';\n        //console.log(localStorage.length)    \n    }\n\n    var target = document.querySelector('#target_zone');\n    var stringData = [];\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n        for (var _iterator = target.children[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var friend = _step.value;\n\n            stringData.push(friend.getAttribute('id'));\n        }\n    } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n            }\n        } finally {\n            if (_didIteratorError) {\n                throw _iteratorError;\n            }\n        }\n    }\n\n    localStorage.targetData = stringData;\n});\n\ndocument.addEventListener('keyup', function (e) {\n    if (e.target.classList.contains('input')) {\n        var half = e.target.closest('.half');\n        if (!e.target.value) {\n            noFilter(half.querySelector('.friends-list'));\n            return;\n        }\n        dressCode(e.target.value, half.querySelector('.friends-list'));\n    }\n});\n\nfunction renderFromStorage(vk_items) {\n    var storage_list = loadStorage();\n    var right_friends = { items: [] };\n    var left_friends = { items: [] };\n    var i = 0;\n\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n        for (var _iterator2 = vk_items[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var item = _step2.value;\n\n            if (i < storage_list.length) {\n                //console.log(item.id)  \n                //console.log(item.last_name)           \n                if (item.id === storage_list[i]) {\n                    right_friends.items.push(item);\n                    console.log(vk_items.length);\n                    i++;\n                } else {\n                    left_friends.items.push(item);\n                }\n            } else {\n                left_friends.items.push(item);\n            }\n        }\n    } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                _iterator2.return();\n            }\n        } finally {\n            if (_didIteratorError2) {\n                throw _iteratorError2;\n            }\n        }\n    }\n\n    console.log(right_friends);\n    renderFriends(left_friends, document.querySelector('#friends_template_left').textContent, document.querySelector('#source_list'));\n\n    renderFriends(right_friends, document.querySelector('#friends_template_right').textContent, document.querySelector('#target_list'));\n}\n\nfunction renderFriends(friends, template, parent) {\n    var render = Handlebars.compile(template);\n    var html = render(friends);\n    parent.innerHTML = html;\n}\n\nfunction loadStorage() {\n    if (localStorage.targetData && localStorage.targetData !== '') {\n        var id_list = [];\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n            for (var _iterator3 = localStorage.targetData.split(',')[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                var elem = _step3.value;\n\n                id_list.push(parseInt(elem));\n            }\n            //console.log(id_list)\n        } catch (err) {\n            _didIteratorError3 = true;\n            _iteratorError3 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                    _iterator3.return();\n                }\n            } finally {\n                if (_didIteratorError3) {\n                    throw _iteratorError3;\n                }\n            }\n        }\n\n        return id_list.sort(function (a, b) {\n            return a - b;\n        });\n    }\n}\n\nfunction noFilter(friends) {\n    if (friends.innerHTML) {\n        var _iteratorNormalCompletion4 = true;\n        var _didIteratorError4 = false;\n        var _iteratorError4 = undefined;\n\n        try {\n            for (var _iterator4 = friends.children[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                var friend = _step4.value;\n\n                friend.style.display = \"flex\";\n            }\n        } catch (err) {\n            _didIteratorError4 = true;\n            _iteratorError4 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion4 && _iterator4.return) {\n                    _iterator4.return();\n                }\n            } finally {\n                if (_didIteratorError4) {\n                    throw _iteratorError4;\n                }\n            }\n        }\n    }\n}\n\nfunction dressCode(chunk, friends) {\n    if (friends.innerHTML) {\n        var _iteratorNormalCompletion5 = true;\n        var _didIteratorError5 = false;\n        var _iteratorError5 = undefined;\n\n        try {\n            for (var _iterator5 = friends.children[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n                var friend = _step5.value;\n\n                if (isMatching(friend.querySelector('#friend_name').innerHTML, chunk)) {\n                    friend.style.display = \"flex\";\n                } else {\n                    friend.style.display = \"none\";\n                }\n            }\n        } catch (err) {\n            _didIteratorError5 = true;\n            _iteratorError5 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion5 && _iterator5.return) {\n                    _iterator5.return();\n                }\n            } finally {\n                if (_didIteratorError5) {\n                    throw _iteratorError5;\n                }\n            }\n        }\n    }\n}\n\nfunction isMatching(full, chunk) {\n    function checkMatch(index) {\n        var _iteratorNormalCompletion6 = true;\n        var _didIteratorError6 = false;\n        var _iteratorError6 = undefined;\n\n        try {\n            for (var _iterator6 = chunkArr[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n                var char = _step6.value;\n\n                if (fullArr[index] !== char) {\n                    return false;\n                }\n                index++;\n            }\n        } catch (err) {\n            _didIteratorError6 = true;\n            _iteratorError6 = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion6 && _iterator6.return) {\n                    _iterator6.return();\n                }\n            } finally {\n                if (_didIteratorError6) {\n                    throw _iteratorError6;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    var fullArr = full.toUpperCase().split('');\n    var chunkArr = chunk.toUpperCase().split('');\n\n    for (var i = 0; i < fullArr.length; i++) {\n        if (chunkArr[0] === fullArr[i]) {\n            if (fullArr.lenght - i < chunkArr.length) {\n                return false;\n            }\n            if (checkMatch(i)) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction checkFilter(friend, target_zone) {\n    var half = target_zone.closest('.half');\n    var filter = half.querySelector('#filter');\n    if (filter.value !== '') {\n        if (!isMatching(friend.querySelector('#friend_name').innerHTML, filter.value)) {\n            friend.style.display = \"none\";\n        }\n    }\n}\n\nfunction moveFriend(friend_node) {\n    // не понимаю почему не видит определнне выше source и target \n    // даже если передать их как аргументы??\n    var source = document.querySelector('#source_zone');\n    var target = document.querySelector('#target_zone');\n\n    toggleFriendClass(friend_node);\n\n    if (friend_node.parentNode === source) {\n        checkFilter(friend_node, target);\n        target.appendChild(friend_node);\n    } else {\n        checkFilter(friend_node, source);\n        source.appendChild(friend_node);\n    }\n}\n\nfunction toggleFriendClass(friend_node) {\n    friend_node.classList.toggle('friend-right');\n    friend_node.classList.toggle('friend-left');\n}\n\nfunction makeDnD(z_source, z_target) {\n    var currentDrag = void 0;\n\n    //z_source.addEventListener('dragstart', (e) => {\n    document.addEventListener('dragstart', function (e) {\n        currentDrag = { 'source': z_source, 'node': e.target };\n    });\n\n    //z_source.addEventListener('dragover', (e) => {\n    document.addEventListener('dragover', function (e) {\n        e.preventDefault();\n    });\n\n    //z_target.addEventListener('drop', (e) => {\n    document.addEventListener('drop', function (e) {\n        if (currentDrag) {\n            e.preventDefault();\n\n            if (e.target === z_target || e.target.parentNode === z_target || e.target.parentNode.parentNode === z_target) {\n\n                toggleFriendClass(currentDrag.node);\n                checkFilter(currentDrag.node, z_target);\n\n                if (e.target !== z_target) {\n                    z_target.insertBefore(currentDrag.node, e.target.nextElementSibling);\n                } else {\n                    z_target.appendChild(currentDrag.node);\n                }\n\n                currentDrag = null;\n            }\n        }\n    });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9pbmRleC5qcz8zOWZlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0E7O0FBRUEsR0FBRztXQUVDO1lBQ0E7V0FDQTthQUFhLE9BQU87QUFIcEI7O0FBT0osU0FBUyxPQUNMO2VBQVcsUUFBUSxVQUFDLFNBQVMsUUFDekI7V0FBRyxNQUFNLG9CQUNMO2dCQUFHLFNBQVMsY0FDUjtBQUNIO0FBRkQsbUJBR0k7dUJBQU8sSUFBSSxNQUNkO0FBQ0o7QUFDSjtBQUNKLEtBVFU7OztBQVdYLFNBQVMsUUFBUSxRQUFRLFFBQ3JCO0FBRUE7O2VBQVcsUUFBUSxVQUFDLFNBQVEsUUFDeEI7V0FBRyxJQUFJLFFBQVEsUUFBUyxnQkFDcEI7Z0JBQUcsS0FBSyxPQUNKO3VCQUFPLEtBQ1Y7QUFGRCxtQkFHSTt3QkFBUSxLQUNYO0FBQ0o7QUFDSjtBQUVKLEtBVlU7OztBQVlYLE9BQ0ssS0FBSyxZQUNIO0FBQ0E7V0FBTyxRQUFRLHFEQUFxRCxPQUN0RTtBQUpMLEdBS0ssS0FBSyxtQkFDRjtBQUNBO1FBQUksQ0FBQyxhQUFhLGNBQWMsYUFBYSxlQUFlLElBQ3hEO3NCQUFjLFNBQVMsU0FBUyxjQUFjLDBCQUEwQixhQUN4RSxTQUFTLGNBRVQ7O3NCQUFjLEVBQUMsT0FBTSxNQUFLLFNBQVMsY0FBYywyQkFBMkIsYUFDNUUsU0FBUyxjQUNaO0FBTkQsV0FPSTswQkFBa0IsUUFDckI7QUFFRDs7UUFBSSxjQUFjLFNBQVMsY0FDM0I7UUFBSSxjQUFjLFNBQVMsY0FFM0I7O1lBQVEsYUFFWDtBQXRCTDs7QUF5QkEsSUFBTSxNQUFNLFNBQVMsY0FBYzs7QUFFbkMsU0FBUyxpQkFBaUIsU0FBUyxhQUMvQjtRQUFJLEVBQUUsT0FBTyxVQUFVLFNBQVMsV0FDNUI7WUFBSSxPQUFPLEVBQUUsT0FDYjtZQUFHLEVBQUUsVUFBVSxLQUFLLE9BQUssS0FBSyxRQUFNLE1BQzdCLEVBQUUsVUFBVSxLQUFLLE1BQUksS0FBSyxTQUFPLEtB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WSxRQUN2QjtRQUFJLFNBQVMsS0FBSyxjQUNsQjtRQUFJLE9BQU8sVUFBVSxJQUNqQjtZQUFJLENBQUMsV0FBWSxPQUFPLGNBQWMsZ0JBQWdCLFdBQVcsT0FBTyxRQUNwRTttQkFBTyxNQUFNLFVBQ2hCO0FBQ0o7QUFDSjs7O0FBRUQsU0FBUyxXQUFXLGFBQ2hCO0FBQ0E7QUFDQTtRQUFJLFNBQVMsU0FBUyxjQUN0QjtRQUFJLFNBQVMsU0FBUyxjQUV0Qjs7c0JBRUE7O1FBQUcsWUFBWSxlQUFlLFFBQzFCO29CQUFZLGFBQ1o7ZUFBTyxZQUVWO0FBSkQsV0FLSTtvQkFBWSxhQUNaO2VBQU8sWUFDVjtBQUNKOzs7QUFFRCxTQUFTLGtCQUFrQixhQUN2QjtnQkFBWSxVQUFVLE9BQ3RCO2dCQUFZLFVBQVUsT0FDekI7OztBQUVELFNBQVMsUUFBUSxVQUFVLFVBQ3ZCO1FBRUE7O0FBQ0E7YUFBUyxpQkFBaUIsYUFBYyxhQUNwQztzQkFBYyxFQUFDLFVBQVUsVUFBVSxRQUFRLEVBQzlDO0FBRUQ7O0FBQ0E7YUFBUyxpQkFBaUIsWUFBYSxhQUNuQztVQUNIO0FBRUQ7O0FBQ0E7YUFBUyxpQkFBaUIsUUFBUyxhQUMvQjtZQUFHLGFBQ0M7Y0FFQTs7Z0JBQUcsRUFBRSxXQUFXLFlBQ1QsRUFBRSxPQUFPLGVBQWUsWUFDeEIsRUFBRSxPQUFPLFdBQVcsZUFBZSxVQUV0Qzs7a0NBQWtCLFlBQ2xCOzRCQUFZLFlBQVksTUFFeEI7O29CQUFHLEVBQUUsV0FBVyxVQUNaOzZCQUFTLGFBQWEsWUFBWSxNQUFNLEVBQUUsT0FFN0M7QUFIRCx1QkFJSTs2QkFBUyxZQUFZLFlBQ3hCO0FBRUQ7OzhCQUNIO0FBQ0o7QUFDSjtBQUVKIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLy/Qv9C+0LTQutC70Y7Rh9Cw0LXQvCDQvdCwINGB0YLRgNCw0L3QuNGG0YMgdmtcclxuXHJcbkZCLmluaXQoe1xyXG4gICAgYXBwSWQgICAgICA6IDM0ODcyNDgwNTk0NDc4MSxcclxuICAgIHN0YXR1cyAgICAgOiB0cnVlLFxyXG4gICAgeGZibWwgICAgICA6IHRydWUsXHJcbiAgICB2ZXJzaW9uICAgIDogJ3YyLjcnIC8vIG9yIHYyLjYsIHYyLjUsIHYyLjQsIHYyLjNcclxuICB9KTtcclxuXHJcblxyXG5mdW5jdGlvbiBBdXRoKCl7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIEZCLmxvZ2luKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgaWYocmVzcG9uc2UuYXV0aFJlc3BvbnNlKXtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignRmFpbGVkIHRvIGxvZ2luJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbGxBUEkobWV0aG9kLCBwYXJhbXMpe1xyXG4gICAgLy9wYXJhbXMudiA9ICc1LjkyJztcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUscmVqZWN0KSA9PiB7XHJcbiAgICAgICAgRkIuYXBpKG1ldGhvZCwgcGFyYW1zLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBpZihkYXRhLmVycm9yKXtcclxuICAgICAgICAgICAgICAgIHJlamVjdChkYXRhLmVycm9yKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhLnJlc3BvbnNlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG59XHJcblxyXG5BdXRoKClcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgIC8vIHJldHVybiBjYWxsQVBJKCd1c2Vycy5nZXQnLCB7fSlcclxuICAgICAgIHJldHVybiBjYWxsQVBJKCcvbWUvZnJpZW5kcz9maWVsZHM9cGljdHVyZS53aWR0aCg0MDApLmhlaWdodCg0MDApJywgJ0dFVCcsIHt9KVxyXG4gICAgfSlcclxuICAgIC50aGVuKGZyaWVuZHMgPT4ge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2cobG9jYWxTdG9yYWdlLmxlbmd0aCk7XHJcbiAgICAgICAgaWYgKCFsb2NhbFN0b3JhZ2UudGFyZ2V0RGF0YSB8fCBsb2NhbFN0b3JhZ2UudGFyZ2V0RGF0YSA9PT0gJycpe1xyXG4gICAgICAgICAgICByZW5kZXJGcmllbmRzKGZyaWVuZHMsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmcmllbmRzX3RlbXBsYXRlX2xlZnQnKS50ZXh0Q29udGVudCwgXHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzb3VyY2VfbGlzdCcpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJlbmRlckZyaWVuZHMoe2l0ZW1zOltdfSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZyaWVuZHNfdGVtcGxhdGVfcmlnaHQnKS50ZXh0Q29udGVudCwgXHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YXJnZXRfbGlzdCcpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZW5kZXJGcm9tU3RvcmFnZShmcmllbmRzLml0ZW1zKTtcclxuICAgICAgICB9ICAgXHJcblxyXG4gICAgICAgIHZhciBzb3VyY2Vfem9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzb3VyY2Vfem9uZScpO1xyXG4gICAgICAgIHZhciB0YXJnZXRfem9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YXJnZXRfem9uZScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG1ha2VEbkQoc291cmNlX3pvbmUsIHRhcmdldF96b25lKTtcclxuICAgICAgICAgICAgXHJcbiAgICB9KTtcclxuXHJcblxyXG5jb25zdCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmcmllbmQnKSl7XHJcbiAgICAgICAgdmFyIHJlY3QgPSBlLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICBpZihlLmNsaWVudFggPiByZWN0LmxlZnQrcmVjdC53aWR0aC0xNSBcclxuICAgICAgICAgICAgJiYgZS5jbGllbnRZID4gcmVjdC50b3ArcmVjdC5oZWlnaHQvMyBcclxuICAgICAgICAgICAgJiYgZS5jbGllbnRZIDwgcmVjdC50b3ArMipyZWN0LmhlaWdodC8zKXtcclxuICAgICAgICAgICAgbW92ZUZyaWVuZChlLnRhcmdldCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KVxyXG5cclxuYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cclxuICAgIGlmKGxvY2FsU3RvcmFnZS50YXJnZXREYXRhKXtcclxuICAgIGxvY2FsU3RvcmFnZS50YXJnZXREYXRhID0gJyc7XHJcbiAgICAvL2NvbnNvbGUubG9nKGxvY2FsU3RvcmFnZS5sZW5ndGgpICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBsZXQgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RhcmdldF96b25lJyk7ICAgICAgIFxyXG4gICAgbGV0IHN0cmluZ0RhdGEgPSBbXTtcclxuICAgIGZvciAodmFyIGZyaWVuZCBvZiB0YXJnZXQuY2hpbGRyZW4peyAgICAgICAgICAgIFxyXG4gICAgICAgIHN0cmluZ0RhdGEucHVzaChmcmllbmQuZ2V0QXR0cmlidXRlKCdpZCcpKVxyXG4gICAgfSAgICBcclxuICAgIGxvY2FsU3RvcmFnZS50YXJnZXREYXRhID0gc3RyaW5nRGF0YTsgICAgICAgICAgICBcclxufSlcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGUpID0+IHsgXHJcbiAgICBpZihlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2lucHV0Jykpe1xyXG4gICAgICAgIGxldCBoYWxmID0gZS50YXJnZXQuY2xvc2VzdCgnLmhhbGYnKTsgXHJcbiAgICAgICAgaWYgKCFlLnRhcmdldC52YWx1ZSkge1xyXG4gICAgICAgICAgICBub0ZpbHRlciAoaGFsZi5xdWVyeVNlbGVjdG9yKCcuZnJpZW5kcy1saXN0JykpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRyZXNzQ29kZShlLnRhcmdldC52YWx1ZSwgaGFsZi5xdWVyeVNlbGVjdG9yKCcuZnJpZW5kcy1saXN0JykpO1xyXG4gICAgfVxyXG59KVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyRnJvbVN0b3JhZ2UodmtfaXRlbXMpe1xyXG4gICAgdmFyIHN0b3JhZ2VfbGlzdCA9IGxvYWRTdG9yYWdlKCk7XHJcbiAgICB2YXIgcmlnaHRfZnJpZW5kcz17aXRlbXM6W119O1xyXG4gICAgdmFyIGxlZnRfZnJpZW5kcyA9IHtpdGVtczpbXX07XHJcbiAgICB2YXIgaSA9IDA7XHJcblxyXG4gICAgZm9yKHZhciBpdGVtIG9mIHZrX2l0ZW1zKXtcclxuICAgICAgICBpZiAoaSA8IHN0b3JhZ2VfbGlzdC5sZW5ndGgpeyBcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhpdGVtLmlkKSAgXHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coaXRlbS5sYXN0X25hbWUpICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoaXRlbS5pZCA9PT0gc3RvcmFnZV9saXN0W2ldKXtcclxuICAgICAgICAgICAgICAgIHJpZ2h0X2ZyaWVuZHMuaXRlbXMucHVzaChpdGVtKSAgXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2a19pdGVtcy5sZW5ndGgpICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGkrKzsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZWZ0X2ZyaWVuZHMuaXRlbXMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxlZnRfZnJpZW5kcy5pdGVtcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgIH0gICAgICAgIFxyXG4gICAgfSBcclxuXHJcbiAgICBjb25zb2xlLmxvZyhyaWdodF9mcmllbmRzKVxyXG4gICAgcmVuZGVyRnJpZW5kcyhsZWZ0X2ZyaWVuZHMsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmcmllbmRzX3RlbXBsYXRlX2xlZnQnKS50ZXh0Q29udGVudCwgXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc291cmNlX2xpc3QnKSk7XHJcbiAgICBcclxuICAgIHJlbmRlckZyaWVuZHMocmlnaHRfZnJpZW5kcywgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZyaWVuZHNfdGVtcGxhdGVfcmlnaHQnKS50ZXh0Q29udGVudCwgXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFyZ2V0X2xpc3QnKSkgXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckZyaWVuZHMoZnJpZW5kcywgdGVtcGxhdGUsIHBhcmVudCkge1xyXG4gICAgY29uc3QgcmVuZGVyID0gSGFuZGxlYmFycy5jb21waWxlKHRlbXBsYXRlKTtcclxuICAgIGNvbnN0IGh0bWwgPSByZW5kZXIoZnJpZW5kcyk7XHJcbiAgICBwYXJlbnQuaW5uZXJIVE1MID0gaHRtbDtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZFN0b3JhZ2UoKXtcclxuICAgIGlmKGxvY2FsU3RvcmFnZS50YXJnZXREYXRhICYmIGxvY2FsU3RvcmFnZS50YXJnZXREYXRhICE9PSAnJyl7XHJcbiAgICAgICAgdmFyIGlkX2xpc3QgPSBbXTsgXHJcbiAgICAgICAgZm9yICh2YXIgZWxlbSBvZiBsb2NhbFN0b3JhZ2UudGFyZ2V0RGF0YS5zcGxpdCgnLCcpKXtcclxuICAgICAgICAgICAgaWRfbGlzdC5wdXNoKHBhcnNlSW50KGVsZW0pKTtcclxuICAgICAgICB9ICAgICAgICAgICAgICBcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGlkX2xpc3QpXHJcbiAgICAgICAgcmV0dXJuIGlkX2xpc3Quc29ydChmdW5jdGlvbihhLCBiKXtyZXR1cm4gYSAtIGJ9KTsgIFxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBub0ZpbHRlciAoZnJpZW5kcyl7XHJcbiAgICBpZiAoZnJpZW5kcy5pbm5lckhUTUwpeyAgICAgICAgXHJcbiAgICAgICAgZm9yKGxldCBmcmllbmQgb2YgZnJpZW5kcy5jaGlsZHJlbil7XHJcbiAgICAgICAgICAgIGZyaWVuZC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiAgICAgICAgICAgIFxyXG5mdW5jdGlvbiBkcmVzc0NvZGUgKGNodW5rLCBmcmllbmRzKSB7ICAgIFxyXG4gICAgaWYgKGZyaWVuZHMuaW5uZXJIVE1MKXsgICAgICAgIFxyXG4gICAgICAgIGZvcihsZXQgZnJpZW5kIG9mIGZyaWVuZHMuY2hpbGRyZW4pe1xyXG4gICAgICAgICAgICBpZiAoaXNNYXRjaGluZyAoZnJpZW5kLnF1ZXJ5U2VsZWN0b3IoJyNmcmllbmRfbmFtZScpLmlubmVySFRNTCwgY2h1bmspKSB7IFxyXG4gICAgICAgICAgICAgICAgZnJpZW5kLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZyaWVuZC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgIH0gICBcclxuICAgICAgICB9ICAgICAgICAgICAgICBcclxuICAgIH0gICAgXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBpc01hdGNoaW5nIChmdWxsLCBjaHVuaykgeyAgXHJcbiAgICBmdW5jdGlvbiBjaGVja01hdGNoIChpbmRleCkge1xyXG4gICAgICAgIGZvciAodmFyIGNoYXIgb2YgY2h1bmtBcnIpIHtcclxuICAgICAgICAgICAgaWYgKGZ1bGxBcnJbaW5kZXhdICE9PSBjaGFyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGZ1bGxBcnIgPSBmdWxsLnRvVXBwZXJDYXNlKCkuc3BsaXQoJycpO1xyXG4gICAgdmFyIGNodW5rQXJyID0gY2h1bmsudG9VcHBlckNhc2UoKS5zcGxpdCgnJyk7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGk8IGZ1bGxBcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoY2h1bmtBcnJbMF0gPT09IGZ1bGxBcnJbaV0pIHtcclxuICAgICAgICAgICAgaWYgKGZ1bGxBcnIubGVuZ2h0IC0gaSA8IGNodW5rQXJyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjaGVja01hdGNoKGkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7ICBcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tGaWx0ZXIoZnJpZW5kLCB0YXJnZXRfem9uZSl7XHJcbiAgICBsZXQgaGFsZiA9IHRhcmdldF96b25lLmNsb3Nlc3QoJy5oYWxmJyk7IFxyXG4gICAgbGV0IGZpbHRlciA9IGhhbGYucXVlcnlTZWxlY3RvcignI2ZpbHRlcicpO1xyXG4gICAgaWYgKGZpbHRlci52YWx1ZSAhPT0gJycpe1xyXG4gICAgICAgIGlmICghaXNNYXRjaGluZyAoZnJpZW5kLnF1ZXJ5U2VsZWN0b3IoJyNmcmllbmRfbmFtZScpLmlubmVySFRNTCwgZmlsdGVyLnZhbHVlKSkge1xyXG4gICAgICAgICAgICBmcmllbmQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbW92ZUZyaWVuZChmcmllbmRfbm9kZSl7XHJcbiAgICAvLyDQvdC1INC/0L7QvdC40LzQsNGOINC/0L7Rh9C10LzRgyDQvdC1INCy0LjQtNC40YIg0L7Qv9GA0LXQtNC10LvQvdC90LUg0LLRi9GI0LUgc291cmNlINC4IHRhcmdldCBcclxuICAgIC8vINC00LDQttC1INC10YHQu9C4INC/0LXRgNC10LTQsNGC0Ywg0LjRhSDQutCw0Log0LDRgNCz0YPQvNC10L3RgtGLPz9cclxuICAgIGxldCBzb3VyY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc291cmNlX3pvbmUnKTtcclxuICAgIGxldCB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFyZ2V0X3pvbmUnKTtcclxuXHJcbiAgICB0b2dnbGVGcmllbmRDbGFzcyhmcmllbmRfbm9kZSk7XHJcblxyXG4gICAgaWYoZnJpZW5kX25vZGUucGFyZW50Tm9kZSA9PT0gc291cmNlKXtcclxuICAgICAgICBjaGVja0ZpbHRlcihmcmllbmRfbm9kZSwgdGFyZ2V0KTtcclxuICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZnJpZW5kX25vZGUpO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2hlY2tGaWx0ZXIoZnJpZW5kX25vZGUsIHNvdXJjZSk7XHJcbiAgICAgICAgc291cmNlLmFwcGVuZENoaWxkKGZyaWVuZF9ub2RlKVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVGcmllbmRDbGFzcyhmcmllbmRfbm9kZSl7XHJcbiAgICBmcmllbmRfbm9kZS5jbGFzc0xpc3QudG9nZ2xlKCdmcmllbmQtcmlnaHQnKTtcclxuICAgIGZyaWVuZF9ub2RlLmNsYXNzTGlzdC50b2dnbGUoJ2ZyaWVuZC1sZWZ0Jyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VEbkQoel9zb3VyY2UsIHpfdGFyZ2V0KXtcclxuICAgIGxldCBjdXJyZW50RHJhZztcclxuICAgIFxyXG4gICAgLy96X3NvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCAoZSkgPT4ge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgKGUpID0+IHtcclxuICAgICAgICBjdXJyZW50RHJhZyA9IHsnc291cmNlJzogel9zb3VyY2UsICdub2RlJzogZS50YXJnZXR9O1xyXG4gICAgfSlcclxuXHJcbiAgICAvL3pfc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGUpID0+IHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGUpID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KVxyXG5cclxuICAgIC8vel90YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIChlKSA9PiB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgKGUpID0+IHtcclxuICAgICAgICBpZihjdXJyZW50RHJhZyl7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgXHJcblxyXG4gICAgICAgICAgICBpZihlLnRhcmdldCA9PT0gel90YXJnZXQgXHJcbiAgICAgICAgICAgICAgICB8fCBlLnRhcmdldC5wYXJlbnROb2RlID09PSB6X3RhcmdldCBcclxuICAgICAgICAgICAgICAgIHx8IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZSA9PT0gel90YXJnZXQpeyAgICAgICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgdG9nZ2xlRnJpZW5kQ2xhc3MoY3VycmVudERyYWcubm9kZSlcclxuICAgICAgICAgICAgICAgIGNoZWNrRmlsdGVyKGN1cnJlbnREcmFnLm5vZGUsIHpfdGFyZ2V0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihlLnRhcmdldCAhPT0gel90YXJnZXQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHpfdGFyZ2V0Lmluc2VydEJlZm9yZShjdXJyZW50RHJhZy5ub2RlLCBlLnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB6X3RhcmdldC5hcHBlbmRDaGlsZChjdXJyZW50RHJhZy5ub2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY3VycmVudERyYWcgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc2NyaXB0cy9pbmRleC5qcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")}]);